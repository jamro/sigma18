(()=>{"use strict";class e{constructor(e){this.$D4=e}$g6(e){var t=e?"":"r{WARNING! Use Chrome web browser for the best gaming experience!}r";this.$D4.$H2().$h6.$F4(),this.$D4.$H2().$g4("","-----------------------------","SIGMA-18 GAME","-----------------------------","Version of the terminal: ".concat("1.2.1"),"Have fun :)","",t,"","s{PRESS ENTER TO BEGIN YOUR ADVENTURE :)}s","Turn the sound on for the best player experience","",{c:"pause"},{c:"sound",d:"ok"},{c:"chat",d:[["comander","This is commander of Sierra-23, Alex Decker speaking!!!"],["comander","Sir! Two of our engines are damaged! Emergency landing at Sigma-18! Approaching DS003..."],["comander","We cannot keep the approach path! We are too far on the left!"],["comander","Mayday, mayday, mayday..."],["comander","m{...}m"]],t:100},{c:"chat",d:[["hacker","Sierra-23, What is the status?"],["commander","Spaceship wrecked during landing. We cannot use it to get out from here anymore. We are at Sigma-18 Space Station. There seems to be not a soul in the whole location."],["commander","Sir! We need your help! Connect to Sigma-18 Space Station gateway and help us to get away from here!"]],t:500},{c:"pause"},{c:"ln",d:'<div class="terminal-command">s{&gt;}s ssh hacker@sigma18.iss.gov</div>'},{c:"ln",d:"Connecting to sigma18.iss.gov port 22...",t:500},{c:"ln",d:"Connection established",t:500},"","Enabling compatibility mode for protocol 2.0","Remote protocol version 2.0, remote software version OpenSSH 7","Authenticating to sigma18.iss.gov:22...","Server accepts key","Authentication succeeded (publickey)","","Floor plan streaming.","Buffering...",{c:"sound",d:"ok",t:0},{c:e=>{this.$D4.$B().$G4(this.$D4.$s5(),e)}},"Map preview available.","r{WARNING: the connection may be unstable due to low bandwidth}r","","Welcome to Space Station Sigma-18","Type s{help}s and press ENTER to see available commands.",{c:"sound",d:"ok",t:0},{c:"on",t:0})}}class t{$S3(e){this.$D4=e,this.$D3=e.$H2(),this.$j6=e.$s5(),this.$J2=e.$B()}$h4(e){return e[0].toLowerCase()==this.$k6.toLowerCase()}$l6(e){var t=e.length>=2?e[1]:"",s="exec"+t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();t&&this[s]?this[s](e):(this.$D3.$H4("Command not found! Run s{".concat(e[0]," help}s for more info.")),this.$D3.$K2.$g6("err"))}$z2(){this.$D3.$h6.$F4()}$L2(){this.$D3.$h6.$d5()}}class s extends t{constructor(){super(),this._squad=null,this.$k6="door",this.$z6="Open/close doors"}$S3(e){super.$S3(e),this._squad=this.$j6.$j4()}getDoorOnDirection(e){if(-1!=["n","s","e","w"].indexOf(e)){var t=this.$j6.$f(),s=this.$j6.$J4(t.x,t.y),i=s.$k4()[e.toLowerCase()];if(!s.$l4()&&!this.$j6.$F3()&&!s.$G3())return null;if(i)return i}return null}findDoor(e){var t=e.length>=3?e[2].toLowerCase():"unknown",s=this.getDoorOnDirection(t);return s||(this.$D3.$H4("Error: door not found on direction ".concat(t,"!")),this.$D4.$U().$g6("err")),s}execOpen(e){this.doorSwitch(e,!1)}execClose(e){this.doorSwitch(e,!0)}doorSwitch(e,t){var s=this.findDoor(e);s&&(this.$z2(),this.$D3.$K4("doors",["Door look up..."],(()=>{if(!s)return this.$D4.$U().$g6("err"),void this.$L2();if(s.$z4()==t)return this.$D3.$H4("Door found"),this.$D3.$H4("Error: Door already ".concat(t?"closed":"open","!")),this.$D4.$U().$g6("err"),void this.$L2();if(s.$H3())return this.$D3.$H4("Door found"),this.$D3.$H4("Error: Door damaged! Cannot ".concat(t?"close":"open","!")),this.$D4.$U().$g6("err"),void this.$L2();this.$D3.$H4("Door found"),this.$D3.$H4("");var e=s.$L4(),i=s.$I(),o=["Password authorization is required.",{c:"pass",d:60},t?"Closing...":"Opening...",{c:"ln",d:"Done. Door ".concat(s.$P6," ").concat(t?"closed":"open","."),s:"doors",t:500},{c:"sound",d:"ok",t:0},{c:"on"},{c:()=>{t?s.$F5():s.$x6()},t:500}];if(e)this.$D3.$g4([{c:"sound",d:"ok",t:300},{c:"ln",d:"Account (s{".concat(e.user,"}s) has been locked."),s:"doors"},"There were 3 unsuccessful attempts of login.","Answer security question to unlock:","s{".concat(e.question,"}s"),{c:t=>{this.$D3.$f5("Answer:",(i=>{this.$D3.$H4("Answer: "+i),e.$G5(i)?(s.$g5(),this.$D3.$g4([{c:"sound",d:"ok"},{c:"ln",d:"The answer is correct. Account unlocked.",s:"doors"},""].concat(o)),t()):(this.$D3.$g4({c:"ln",d:"Error: Incorrect Answer! The account remains locked",s:"doors"},{c:"sound",d:"err"},{c:"on"}),t())}))}}]);else if(i){var r=this._squad.$x2().filter((e=>"key"==e.$c6&&e.$H5==i));r=!!r.length;var $={c:"ln",d:"This area is restricted! A s{".concat(i," key card}s is required to access"),t:500};r?this.$D3.$g4([$,{c:"chat",d:[["hacker","Commander, I need your assistance. Use ".concat(i," key card to open the door ").concat(s.$P6)],["commander","The key card is in the reader. Done!"]],t:800},"",{c:"ln",d:"Verification of key card...",s:"doors",t:1e3},{c:"sound",d:"ok",t:0},{c:"ln",d:"Access to s{".concat(i," restricted area}s granted."),s:"doors",t:500},"Proceeding to next authorization step",""].concat(o)):this.$D3.$g4([$,{c:"chat",d:[["hacker","Commander, We need a ".concat(i," key card to open the door ").concat(s.$P6)],["commander","We do not have required key card!"]],t:800},"",{c:"ln",d:"Timeout... access to s{".concat(i," restricted area}s denied."),s:"doors",t:1700},{c:"sound",d:"err",t:0},{c:"on"}])}else this.$D3.$g4(o)})))}execHelp(){this.$D3.$g4("Open/close doors in current location of the squad","(The operation requires of being near to the doors due to low range of manual transmitters)","","Available commands are:","","s{door open [N/E/S/W]}s","Open the door on north (s{N}s), east (s{E}s), south (s{S}s) or west (s{W}s)","For example s{door open N}s","","s{door close [N/E/S/W]}s","Close the door on north (s{N}s), east (s{E}s), south (s{S}s) or west (s{W}s)","For example s{door close N}s",{c:"sound",d:"ok",t:0})}}class i extends t{constructor(){super(),this._capsuleDoor=null,this._fuel={DS001:0,DS002:0,DS003:8},this.$k6="dock",this.$z6="Operate docking stations and rescue capsules"}$S3(e){super.$S3(e),this._capsuleDoor=this.$j6.$O()}execList(){this.$z2(),this.$D3.$K4("docker",[{c:"ln",d:"Query station list...",s:"docker"}],(()=>{this.$D3.$H4("<pre>Station ID | Location | Status  | Docked Unit\n-----------|----------|---------|-----------------\nDS001      | [C:9]    | Empty   | - \nDS002      | [D:10]   | Ready   | Rescue Capsule\nr{DS003}r      | r{[E:9]}r    | r{Damaged}r | r{ISS Sierra-23}r</pre>"),this.$L2(),this.$D4.$U().$g6("ok")}))}execLaunch(e){var t=e.length>=3?e[2].toUpperCase():"";if(!t)return this.$D3.$H4("Error: StationId argument is required. Run s{dock help}s for more info."),void this.$D4.$U().$g6("err");this.$z2(),this.$D3.$K4("docker",[],(()=>{this.$D3.$H4("Authorization is required!"),this.$D3.$f5("Auth Code:",(e=>{if("U317AB"!=e.toUpperCase())return this.$D3.$H4(""),this.$D3.$H4("Error: Authorization failed. Incorrect pass code."),this.$L2(),void this.$D4.$U().$g6("err");if(this.$D3.$H4("Authorization... ok"),this.$D3.$H4(""),"DS002"!=t)return this.$D3.$H4("Error: Cannot start launching sequence at ".concat(t,".")),this.$L2(),void this.$D4.$U().$g6("err");if(!this._capsuleDoor.$z4())return this.$D3.$H4("Error: Close the door of the station before starting launch sequence."),this.$L2(),void this.$D4.$U().$g6("err");var s=this.$j6.$f();return 3!=s.x||9!=s.y?(this.$D3.$H4(""),this.$D3.$H4("Error: Cannot launch empty capsule without passengers."),this.$L2(),void this.$D4.$U().$g6("err")):this._fuel.DS002<=50?(this.$D3.$H4(""),this.$D3.$H4("Error: Spaceship at ".concat(t," has low fuel level! Launch procedure stopped! See s{dock status ").concat(t,"}s for more details")),this.$L2(),void this.$D4.$U().$g6("err")):(this.$D3.$J3(!1),void this.$D3.$g4({c:"ln",d:"Starting launching sequence at ".concat(t),s:"docker"},"Modules health check:",{c:"load"},"All systems up and running",{c:"ln",d:"Opening docking gates...",t:700},{c:"ln",d:"Staring the engine...",t:900},{c:"ln",d:"Enabling shields...",t:800},{c:"ln",d:"Disconnecting from docking port...",t:750},{c:"ln",d:"",t:2e3},"Done... Unit launched successfully",{c:()=>this.$J2.$K3()},{c:"ln",d:"Closing docking gates",t:1e3},"Launching sequence completed",{c:"chat",d:"s{GOOD JOB SOLDIER!}s<br/>\n We are saved! Going back home!",f:"commander",t:2e3},{c:"chat",d:"Roger that! Good luck commander!",f:"hacker"},{c:"ln",d:'<div class="finito"><h1>THE END</h1></div>',t:1e3},{c:"ln",d:"s{Special thanks}s: Monika Jamroz, Tomasz Stocki, Piotr Jamroz, Grzegorz P., nxn",t:1e3},{c:"sound",d:"ok",t:0},{c:()=>this.$D3.$h6.$h5.$J5(10)}))}))}))}execFuel(e){var t,s=e.length>=3?e[2].toUpperCase():"";if(!s)return this.$D3.$H4("Error: StationId argument is required. Run s{dock help}s for more info."),void this.$D4.$U().$g6("err");this._fuel[s]=100,t="DS002"==s||"DS003"==s?[{c:"ln",d:"Fueling spaceship at ".concat(s,"..."),s:"pump-station"},{c:"load"},"",{c:"ln",d:"Done. Fuel level: 100%",s:"pump-station"},{c:"sound",d:"ok"},{c:"on"}]:["Error: No spaceship at ".concat(s),{c:"sound",d:"err"},{c:"on"}],this.$z2(),this.$D3.$K4("pump-station",t,(()=>{}))}execStatus(e){this.$z2();var t=e.length>=3?e[2].toUpperCase():"";this.$D3.$K4("docker",["Station record found"],(()=>{var e,s,i,o,r,$=[],n="s{ok}s",a="r{damaged}r";switch(t){case"DS001":case"DS002":e=n,s=n,i=n,o=n,r=n;break;case"DS003":e="r{open}r",s=a,i="r{disconnected}r",o="r{depressurized}r",r=a;break;default:return this.$D3.$H4("Error: Dock station ".concat(t," not found")),void this.$L2()}switch(t){case"DS001":$=["* s{none}s"];break;case"DS002":$=["* Name: s{Rescue Capsule}s"];break;case"DS003":$=["* Name: s{OSS Sierra-23}s"]}"DS002"!=t&&"DS003"!=t||($=$.concat([this._fuel[t]>50?"* Fuel: s{".concat(this._fuel[t],"%}s"):"* Fuel: r{".concat(this._fuel[t],"%}r"),"* Cargo: s{none}s","* Engine: ".concat(r),"* Shields: ".concat(r),"* Steering System: ".concat(r),"* Radar: s{ok}s","* Communication Systems: ".concat(r)]));var h=["Health check of ".concat(t,"..."),"","Dock station:","* Docking gates: ".concat(e),"* Docking port: ".concat(s),"* Network: ".concat(i),"* Air pressure: ".concat(o),"","Docked Unit:"];h=h.concat($,[{c:"sound",d:"ok",t:0},{c:"on"}]),this.$D3.$g4(h)}))}execHelp(){this.$D3.$g4("Use this command to operate docking stations and rescue capsules","Available commands are:","","s{dock list}s","Lists status of all docking stations","","s{dock status [stationId]}s","Health report of the station and docked spaceship","","s{dock fuel [stationId]}s","Fuel spaceship docked at provided station","","s{dock launch [stationId]}s","Launch spaceship docked at [stationId].","For example: s{dock launch DS001}s",{c:"sound",d:"ok",t:0})}}class o extends t{constructor(){super(),this._virus=null,this._header="Virus Infector version 3.2.9",this.$k6="virus",this.$z6="Infect specified hosts and blocks communication in their newtwork"}$S3(e){super.$S3(e),this.$L3=this.$j6.$y(),this._virus=this.$j6.$x4()}execActivate(){var e=this._virus.$g(),t=this._virus.$Z3(),s=[{c:"off",t:0},this._header,"","Connecting to activation gateway...",{c:"ln",d:"Connection establlished",t:1e3},"","Current infection coverage: ".concat((100*t.stats.infection).toFixed(1),"%")];s=e?s.concat(["Error: "+e,{c:"sound",d:"err",t:0},{c:"on",t:0}]):s.concat(["Activating... ",{c:"load"},{c:()=>{this._virus.$c4()}},"Completed","","Virus activation process started.","Run s{virus status}s to check the progress",{c:"sound",d:"ok",t:0},{c:"on",t:0}]),this.$D3.$g4(s)}execInfect(e){var t=e.length>=3?e[2]:"";if(!t)return this.$D3.$H4("Error: Host argument is required. Run s{virus help}s for more info."),void this.$D4.$U().$g6("err");var s=[{c:"off",t:0},this._header,"","Connecting to host s{".concat(t,"}s...")],i=this._virus.$p(t);s=i?s.concat([{c:"ln",d:"Error: "+i,t:500},{c:"sound",d:"err"},{c:"on"}]):s.concat([{c:"ln",d:"Warning: Session key is required!",t:500},{c:"pass",d:100,l:"SessID"},"Connection established","","Uploading infected binaries...",{c:"load"},"Done","","Adding to Boot Loader...",{c:()=>{this._virus.$j5(t)}},{c:"ln",d:"Completed!",t:1e3},"","Host s{".concat(t,"}s infected."),"Virus is s{inactive}s.","","Wait until it penetrates SIG-18 network before the activation.","Check status of infection by s{virus status}s",{c:"sound",d:"ok"},{c:"on"}]),this.$D3.$g4(s)}execStatus(){this.$D3.$g4({c:"off"},this._header,"","Connecting to infection stats node...",{c:"ln",d:"Connection established",t:800},"",{t:400,c:e=>{var t=this._virus.$Z3();if(0==t.stats.infection)return this.$D3.$H4("s{No infected hosts found!}s"),e();this.$D3.$H4("Infection progress:");var s=this.$D3.$c2();this.$D3.$H4(""),this.$D3.$H4("Activation progress:");var i=this.$D3.$c2();this.$D3.$H4("");var o="",r=setInterval((()=>{var e=(t=this._virus.$Z3()).stats.infection.toFixed(2)+"_"+t.stats.activation.toFixed(2);e!=o&&(o=e,this.$D4.$U().$g6("beep2")),this.$D3.$c2(100*t.stats.infection,s),this.$D3.$c2(100*t.stats.activation,i)}),30);this.$D3.$K5((()=>{clearInterval(r),e()}))}},"Live update mode disabled","Conection with stats node closed",{c:"sound",d:"ok"},{c:"on"})}execHelp(){this.$D3.$g4("The virus attacks SIG-18 communication modules disrupting incoming and outcoming traffic. The virus spreads across the network of SIG-18 and stays inactive. After achieving desired coverage a manual activation is required by running s{virus activate}s","r{WARNING! IT SPREADS VERY FAST! USE WITH CAUTION!}r","","Available commands are:","","s{virus status}s","Show level of virus spreading","","s{virus infect [host]}s","Infect provided [host] and stays inactive.","After this stage, virus tries to spread as wide as possible.","For example s{virus infect 20.43.53.112}s","","s{virus activate}s","Activate virus on all infected hosts.",{c:"sound",d:"ok",t:0})}}class r extends t{constructor(){super(),this._data=[["swoodley","Sean Woodley","Commander","2036-01-08","Crux Academy","m","is ultimately responisble for","space station management","manager","master's",23,10,"army","NESA, ISA and MTR","operational management of ISS Sigma-18","space station management"],["wirving","Walter Irving","Research Director","2045-07-21","Enderson Institute","m","looks after","team of researchers","engineer","doctoral",14,3,"computer science","Enderson Institute, NESA and Elcroy","improving artifical inteligence of SIG-18 battle droids","artifical inteligence"],["vparra","Victoria Parra","Engineer","2051-03-15","Yathe University","f","develops","SIG-18's image recognition","engineer","master's",6,3,"software development","DataTech and Elcroy","implementation of artifical inteligence modules for SIG-18 battle droids","neural networks"],["dschaefer","Duncan Schaefer","Engineer","2053-09-30","Enderson Institute","m","develops","SIG-18's decision alghoritms","engineer","master's",4,2,"software development","Elcroy, CorpData an Eclipse Inc","implementation of artifical inteligence modules for SIG-18 battle droids","machine learning"],["cmcmanus","Cristiano Mcmanus","Engineer","2050-11-03","Sawyr Institute","m","develops","SIG-18's battle behaviour","engineer","master's",7,1,"software development","SpaceZ, Elcroy and INO Tech","implementation of artifical inteligence modules for SIG-18 battle droids","big data"],["ffountain","Frank Fountain","Security Officer","2049-02-22","Crux Academy","m","is responsible for","secuirity","security specialist","bachelor's",10,3,"army","MTR and Seq Inc","securing researches on artifical inteligence of SIG-18 battle droids","monitoring systems"],["ngallegos","Nick Gallegos","System Administrator","2045-01-01","Yathe University","m","looks after","Sigma-18, core systems and services","engineer","master's",10,4,"computer science","Elcroy, CorpData and DellaX","administration of internal systems of ISS Sigma-18","Clustered Core Systems"],["fortiz","Felix Ortiz","Mechanic","2052-12-15","Sawyr Institute","m","looks after","hardware maintenance in ISS Sigma-18","engineer","bachelor's",8,4,"space equipment servicing","SpaceZ, Elcroy and Tesllo","fixing and installation of space equipment at ISS Sigma-18","space equipment level IX"],["grodriquez","Giorgio Rodriquez","Office Worker","2038-06-06","Blane School","m","supports the team, providing","documentation and legal support","office administrator","bachelor's",15,8,"comiplance and HR","BIM Inc, Headspace and LSX Institute","HR and compilance processes","human resources management"],["mhahn","Mikey Hahn","Medical Doctor","2040-10-29","Balo University","m","looks after","health care in ISS Sigma-18","doctor","medical master's",14,5,"medicine","Zralo Medical Center, Fafield Hospital and Osacaster Clinic","regular health checks and tratments of the crew","space adaptation syndrome"],["rballard","Ritchie Ballard","Chief","2044-04-23","Blane School","m","supports the team by taking care of","food supply","cook","bachelor's",8,2,"gastronomy","ISA, Elcroy and Druburg Institute","preparing meals and maintenance of food supplies ","space logistic"]],this.$k6="crew",this.$z6="Show information about crew members of Sigma-18"}execList(){var e=(e,t)=>{for(;e.length<t;)e+=" ";return e};this.$z2(),this.$D3.$K4("data-warehouse",[{c:"ln",d:"Query: /crew/*",s:"data-warehouse"},"".concat(this._data.length," records found")],(()=>{var t="<pre>User Name   |Full Name          |Role\n------------|-------------------|------------------------\n";this._data.forEach((s=>{t+=e(s[0],12)+"|"+e(s[1],19)+"|"+s[2]+"\n"})),this.$D3.$H4(t),this.$L2(),this.$D4.$U().$g6("ok")}))}execShow(e){var t=e.length>=3?e[2]:"";if(!t)return this.$D3.$H4("Error: username argument is required. Run s{crew help}s for more info."),void this.$D4.$U().$g6("err");var s=this._data.filter((e=>e[0]==t));s=s.length?s[0]:null,this.$z2(),this.$D3.$K4("data-warehouse",[{c:"ln",d:"Query: /crew/"+t,s:"data-warehouse"},s?"1 record found":"",{c:"ln",d:"",t:500}],(()=>{if(!s)return this.$D3.$H4("Error: no record matching the criteria","data-warehouse"),this.$D4.$U().$g6("err"),void this.$L2();var e="m"==s[5]?"he":"she",t="".concat(s[1]," is a ").concat(s[2]," with ISS Sigma-18. In this role, ").concat(e," ").concat(s[6]," all aspects of ").concat(s[7],".  ").concat(s[1]," is a qualified ").concat(s[8]," and holds the ").concat(s[9]," degree from ").concat(s[4],". Has more than ").concat(s[10]," years of experience in ").concat(s[12],". Before joining ISS Sigma-18 in ").concat(2080-s[11],", ").concat(e," worked for ").concat(s[10]-s[11]," years for a diverse range of organizations, including ").concat(s[13],". In current role, ").concat(e," is responsible for ").concat(s[14],". ").concat(s[1]," specializes in ").concat(s[15],".");this.$D3.$g4("s{Full Name}s:  "+s[1],"s{Login}s:      "+s[0],"s{Role}s:       "+s[2],"s{Birth Date}s: "+s[3],"","s{Bio}s:",t,{c:"sound",d:"ok"},{c:"on"}),this.$D4.$U().$g6("ok"),this.$L2()}))}execHelp(){this.$D3.$g4("Available commands are:","","s{crew list}s","List members of Sigma-18 crew.","","s{crew show [username]}s","Show details about crew member with user name [username]","For example: s{crew show jdoe}s",{c:"sound",d:"ok",t:0})}}function $(e,t){var s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!s){if(Array.isArray(e)||(s=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return n(e,t)}(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,$=!0,a=!1;return{s:function(){s=s.call(e)},n:function(){var e=s.next();return $=e.done,e},e:function(e){a=!0,r=e},f:function(){try{$||null==s.return||s.return()}finally{if(a)throw r}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}class a extends t{constructor(){super(),this.$a=null,this.authCodeNo=0,this.$k6="power",this.$z6="Manage power supply for space station"}$S3(e){super.$S3(e),this.$a=this.$j6.$y()}execUp(e){var t=e.length>=3?e[2].toLowerCase():"";this.$X3(t,!0)}execDown(e){var t=e.length>=3?e[2].toLowerCase():"";this.$X3(t,!1)}$v6(e,t){if(!e.$C3)return t();this.$D3.$g4("","WARNING! s{".concat(e.$k6,"}s is a critial service."),"Multi factor authentication process is required",{c:"sound",d:"ok"},"","s{Auth Level 1}s","s{============}s","login: ngallegos",{c:"pass",d:100,l:"password"},"Password correct",{c:"sound",d:"ok"},"","s{Auth Level 2}s","s{============}s","Sending auth code message to s{message-hub}s service...",{c:"load"},"","An text message has been sent to user s{ngallegos}s.","Enter the code to log in.",{c:"sound",d:"ok"},{c:()=>{this.authCodeNo++;var e=Math.floor(65535*Math.random()).toString(16).toUpperCase().replace(/0/g,"X");this.$D3.$U6("message-hub","MSG [to: ngallegos, authCode_".concat(this.authCodeNo,": ").concat(e,"]")),this.$D3.$f5("Auth code #".concat(this.authCodeNo,":"),(s=>{(s=s.toUpperCase())==e?(this.$D3.$H4("Auth code #".concat(this.authCodeNo,": ****** (correct)")),this.$D3.$H4(""),t()):(this.$D3.$H4("Error: incorrect auth code"),this.$D4.$U().$g6("err"),this.$L2())}))}})}$X3(e,t){if(!e)return this.$D3.$H4("Error: ServiceName argument is required. Run s{power help}s for more info."),void this.$D4.$U().$g6("err");this.$D3.$h6.$F4();var s=this.$a.$u(e,t);this.$D3.$K4("power-manager",["".concat(t?"Starting":"Stopping"," service ").concat(e,"...")],(()=>{if(s)this.$D3.$g4("","Error: "+s,{c:"sound",d:"err"},{c:"on"});else{var i=this.$a.$k3(e);this.$v6(i,(()=>{var s=["".concat(i.$k6,": ").concat(i.$A6),{c:"load"},{c:"ln",d:"Service ".concat(e," ").concat(t?"started":"stopped"),s:"power-manager"},{c:"sound",d:"ok"},{c:()=>{t?this.$a.$S6(e):this.$a.$I6(e),this.$D3.$H4(""),this.$D3.$H4("Current power consumption: s{".concat(this.$a.$N().toFixed(2),"kW}s / ").concat(this.$a.$P().toFixed(2),"kW"))}}];"oxygen-generator"!=i.$k6||t||(s=s.concat([{c:"ln",d:"r{WARNING: Oxygen Generator is down. Threat to the life of the crew!}r",t:300},{c:"chat",d:"Oxygen level is low. Putting on the masks.",f:"commander",t:1500}])),"power-manager"!=i.$k6&&"message-hub"!=i.$k6||t||(s=s.concat(["",{c:"ln",d:"Warning! s{".concat(i.$k6,"}s is a core service and cannot be powered down!"),t:1e3},{c:"sound",d:"err",t:500},"Restoring service ".concat(e,"..."),{c:"load"},{c:()=>{this.$a.$S6(e),this.$D3.$H4(""),this.$D3.$H4("Current power consumption: s{".concat(this.$a.$N().toFixed(2),"kW}s / ").concat(this.$a.$P().toFixed(2),"kW"))}},"Service restored",{c:"sound",d:"ok"}])),s.push({c:"on"}),this.$D3.$g4(s)}))}}))}execHelp(){this.$D3.$g4("Available commands are:","","s{power status}s","Display status of power generators","","s{power list}s","Display status and power consumption for all services","","s{power [up/down] [serviceName]}s","Power up/down specified service","For example: s{power up lab-services}s",{c:"sound",d:"ok",t:0})}execList(){this.$D3.$h6.$F4();var e,t=(e,t)=>{for(e=e||"";e.length<t;)e+=" ";return e},s=(e,t)=>{for(e=e||"";e.length<t;)e=" "+e;return e},i="<pre>Name             | Address       | Status | P.Consumption\n-----------------|---------------|--------|---------------\n",o=$(this.$a.$A());try{for(o.s();!(e=o.n()).done;){var r=e.value;r.$V3?i+="".concat(t(r.$k6,17),"| ").concat(t(r.$A6,14),"|     on | ").concat(s(r.$v4().toFixed(2)+"kW",13),"\n"):i+="r{".concat(t(r.$k6,17),"}r| r{").concat(t(r.$A6,14),"}r|    r{off}r |        r{0.00kW}r\n")}}catch(e){o.e(e)}finally{o.f()}i+="</pre>";var n=this.$a.$N();this.$D3.$K4("power-manager",[i,"Total power consumption: s{".concat(n.toFixed(2),"kW}s / ").concat(this.$a.$P().toFixed(2),"kW"),{c:"sound",d:"ok",t:0},{c:"on"}],(()=>{}))}execStatus(){this.$D3.$h6.$F4();this.$D3.$K4("power-manager",["<pre>Generator | Status  | Efficiency | Power Supply\n----------|---------|------------|--------------\nAlpha     | ok      |        97% |      48.51kW\nr{Beta}r      | r{damaged}r |         r{0%}r |       r{0.00kW}r\nGamma     | ok      |        54% |      26.97kW</pre>","Total power supply: s{".concat(this.$a.$P().toFixed(2),"kW}s / 150.00kW"),{c:"sound",d:"ok",t:0},{c:"on"}],(()=>{}))}}class h extends t{constructor(){super(),this.$k6="proj",this.$z6="Display SIG-18 project details"}execLog(){var e="s{=======================}s";this.$z2(),this.$D3.$K4("data-warehouse",[{c:"ln",d:"Query: /projects/sig18/log/*",s:"data-warehouse"},"Response received",{c:"pass",d:60,l:"Decrypting"},"Done. 6 records received",{c:"sound",d:"ok",t:0},{c:"pause"},"","s{2080-03-01 10:45:19.482}s",e,"","We are starting the testing phase of artificial intelligence module v19.38.2 for battle droids SIG-18. The first results exceed our expectations. Droids complete test tasks faster and more efficient than planned. Further test will be performed during the upcoming weeks.",{c:"sound",d:"ok",t:0},{c:"pause"},"","s{2080-03-15 15:01:34.826}s",e,"","SIG-18 droids are able to efficiently perform tasks that were for humans only till now. We have ordered a supply of additional SIG-18 droids. After upgrading of AI module to v19.38.2, SIG-18s are going to replace some of crew members.",{c:"sound",d:"ok",t:0},{c:"pause"},"","s{2080-05-02 12:01:33.910}s",e,"","Stage #2 of the project achieved 3 months earlier than planned. Today majority of the crew goes back home and SIG-18 will perform their tasks.  The team is reduced to 11 members - mostly engineering team that continues development of SIG-18 artificial intelligence. Now, there are more droids in the space station than humans.",{c:"sound",d:"ok",t:0},{c:"pause"},"","s{2080-07-20 09:27:57.025}s",e,"","We are during tests of SIG-18, team behaviour and cooperation modes. Today two of our power generators went down. We do not have enough power to continue research as planned. The scope of the project will be narrowed since we have to power down part of SIG-18 droids.",{c:"sound",d:"ok",t:0},{c:"pause"},"","s{2080-07-25 14:41:10.652}s",e,"","Disturbing behaviour was observed during tests of environment analysis algorithm. SIG-18 (host: 20.110.231.18) propose a solution to the inadequate power supply: Powering down oxygen generator instead of SIG-18s and elimination of humans. Further investigation of the issue is required. We probably need to roll back to version 19.38.2 which was the most successful so far.",{c:"sound",d:"ok",t:0},{c:"pause"},"","s{2080-07-26 22:09:19.208}s",e,"","SIG-18s had broken into the armoury and took control over the space station. They were trying to access oxygen generator, but unsuccessfully. Droids have numerical superiority. We need to evacuate from the station.",{c:"sound",d:"ok",t:0},"","s{--- END OF DATA ---}s",{c:"on"}],(()=>{}))}execInfo(){this.$z2(),this.$D3.$K4("data-warehouse",[{c:"ln",d:"Query: /projects/sig18/info",s:"data-warehouse"},"Response received",{c:"pass",d:20,l:"Decrypting"},"Done. 1 record received","","","s{Overview}s","========","s{Project Name}s: SIG-18Z+","s{Status}s: on hold","s{Current Phase}s: #3","","s{Deliverables}s","============","s{Stable release}s: v19.38.2 (2080-03-10)","s{Unstable release}s: v19.54.9 (2080-07-25)","","s{Project Goal}s","============","Improve artificial intelligence of SIG-18 battle droids to achieve reasoning level of Z class units.",{c:"sound",d:"ok",t:0},{c:"on"}],(()=>{}))}execHelp(){this.$D3.$g4("Display SIG-18Z+ project details","Available commands are:","","s{proj info}s","Show SIG-18Z+ project overview","","s{proj log}s","Show SIG-18Z+ history of project turning points",{c:"sound",d:"ok",t:0})}}class c extends t{constructor(){super(),this.$k6="gun",this.$z6="Manual control of sentry guns BER-84"}execShoot(){this.handleAction(((e,t,s,i)=>{var o=t.$B3();if(o.length<=0)return this.$D3.$H4("Error: Cannot find a target"),this.$D4.$U().$g6("err"),void this.$L2();var r=o[Math.floor(Math.random()*o.length)];this.$D3.$g4({c:"ln",d:"Searching for target...",s:"security"},"Enemy found at [".concat(r.x.toFixed(2),"; ").concat(r.y.toFixed(2),"]"),{c:"sound",d:"beep"},{c:"ln",d:"Aiming...",s:"security"},{c:()=>{s.$k5=!0;var e=setInterval((()=>{var t=r.x-s.$l5.x,o=r.y-s.$l5.y,$=Math.sqrt(t*t+o*o);s.$Z4(10*t,10*o),$<.01&&(this.$D4.$U().$b6("beep"),this.$D3.$H4("Target aimed at [".concat(r.x.toFixed(2),"; ").concat(r.y.toFixed(2),"]")),this.$D3.$H4("Open fire!","security"),clearInterval(e),s.$l3=!0,s.$Z4(0,0),setTimeout((()=>{this.$D3.$H4("r{Target eliminated}r"),this.$D3.$H4(""),s.$l3=!1,s.$k5=!1,setTimeout((()=>i()),500)}),1500))}),30)}})}))}execControl(){this.handleAction(((e,t,s,i)=>{this.$D3.$g4("Controls: "," - s{ARROW_KEYS}s: aiming"," - s{SPACE}s: shooting"," - s{Q}s: quit",{c:()=>{this.$D3.$h6.$d5(),this.$D3.$h6.$M("[...]"),this.$D4.$U().$g6("ok"),s.$k5=!0;var e=()=>{s.$k5=!1,this.$Z4(t,s,0,0),s.$l3=!1,this.$D3.$h6.$M(),this.$D3.$h6.$_()};t.$b4((()=>{e()})),this.$D3.$h6.$_((o=>{switch(o.stopImmediatePropagation(),o.preventDefault(),o.keyCode){case 37:this.$Z4(t,s,-1,0);break;case 39:this.$Z4(t,s,1,0);break;case 38:this.$Z4(t,s,0,-1);break;case 40:this.$Z4(t,s,0,1);break;case 32:s.$l3=!0;break;case 81:return e(),i()}}),(e=>{switch(e.stopImmediatePropagation(),e.preventDefault(),e.keyCode){case 37:case 39:case 38:case 40:s.$Z4(0,0);break;case 32:s.$l3=!1}}))}})}))}handleAction(e){var t=this.$j6.$f(),s=this.$j6.$F3(),i=null;s&&(i=s.$J4().$O6),this.$z2(),this.$D3.$K4("security",["BER-84 look up at ".concat(t.toString(),"...")],(()=>{if(!i)return this.$D3.$H4("Error: Cannot connect to BER-84 in the room"),this.$D4.$U().$g6("err"),void this.$L2();this.$D3.$g4("Endpoint found.","Establishing the connection...","Connected","","Authorization",{c:"pass",d:100,l:"Security token"},"","Enabling manual mode",{c:"ln",d:"Manual controller online",s:"security"},"",{c:o=>{e(t,s,i,o)}},"Power down manual controller",{c:"ln",d:"Manual controller offline",s:"security"},"Disconnecting from BER-84...","Connection closed",{c:"sound",d:"ok"},{c:"on"})}))}$Z4(e,t,s,i){if(e.$z5){var o=s;s=i,i=o}i=e.$L5?-i:i,s=e.$Z5?-s:s,t.$Z4(s,i)}execHelp(){this.$D3.$g4("Allow manual control of sentry gun BER-84 installed in security rooms","s{IMPORTANT: Marines squad must be close to BER-84 unit to establish the connection.}s","Available commands are:","","s{gun shoot}s","Attack an enemy in range","","s{gun control}s","manually controls gun",{c:"sound",d:"ok",t:0})}}class l extends t{constructor(){super(),this.$L3=null,this.$Z2=null,this.$n6=null,this.$k6="sniff",this.$z6="Sniff log messages of remote services"}$S3(e){super.$S3(e),this.$L3=this.$j6.$y()}execScan(){var e=[{c:"off"},"Sniffer v2.9.4","","Scanning of local area network... ",{c:"load"},"Completed",""],t=this.$L3.$A().filter((e=>e.$V3)).map((e=>" - ".concat(e.$k6)));e.push("Items found: s{".concat(t.length," services}s")),e=(e=e.concat(t)).concat(["","Run s{sniff on [serviceName]}s to sniff service logs.",{c:"sound",d:"ok"},{c:"on"}]),this.$D3.$g4(e)}execOn(e){if(this.$Z2)return this.$D3.$H4("Error: Sniffer already connected. Disconnect at first!"),void this.$D4.$U().$g6("err");var t=e.length>=3?e[2]:"unknown";this.$z2(),this.$D3.$K4(t,["Encryping log file",{c:"pass",d:20,l:"Password"},""],(()=>{this.$Z2=t,this.$D3.$J3(!0),this.$n6=setInterval((()=>{var e=this.$L3.$k3(this.$Z2).$X4.join("<br/>\n");this.$D3.$h6.$z3("/var/log/".concat(this.$Z2,".log"),e)}),30),this.$D3.$g4("streaming /var/log/".concat(this.$Z2,".log"),"","Sniffer is running in the background.","You can continue the work in the terminal.","run s{sniff off}s to close sniffer window",{c:"on"})}))}execOff(){if(!this.$Z2)return this.$D3.$H4("Error: Sniffer is disabled"),void this.$D4.$U().$g6("err");this.$n6&&(clearInterval(this.$n6),this.$n6=null);var e=this.$Z2;this.$Z2=null,this.$D3.$J3(!1),this.$D3.$g4({c:"off"},"Disconnecting from "+e,"Connection closed",{c:"sound",d:"ok"},{c:"on"})}execHelp(){this.$D3.$g4("The application runs in backgroud.","Available commands are:","","s{sniff scan}s","Scan possible services to sniff and list them","IMPORTANT: powered down services cannot be found that way","","s{sniff on [service-name]}s","Start sniffing of provided service","","s{sniff off}s","Stop the sniffer",{c:"sound",d:"ok",t:0})}}class d{toString(){return"Item"}}class u extends d{constructor(e){super(),this._desc=e,this.$c6="static",this.$P6="static"}toString(){return"".concat(this._desc)}}class m extends d{constructor(e){super(),this.$H5=e,this.$c6="key",this.$P6="key-"+this.$H5}toString(){var e=this.$H5[0].toUpperCase()+this.$H5.slice(1);return"".concat(e," key card")}}class p{constructor(){this.$l5={x:.5,y:.5},this.dx=0,this.dy=0,this.$l3=!1,this.$k5=!1}$Z4(e,t){this.dx=e,this.dy=t}step(){this.$l5.x+=.01*this.dx,this.$l5.y+=.01*this.dy,this.$l5.x=Math.max(.05,Math.min(.95,this.$l5.x)),this.$l5.y=Math.max(.05,Math.min(.85,this.$l5.y))}}class g extends d{constructor(e){super(),this._msg=e,this.$c6="note",this.$P6="note"}toString(){return"Note: &quot;".concat(this._msg,"&quot;")}}class f extends d{constructor(e){super(),this.$C4=e,this.$c6="disk",this.$P6="disk-"+this.$C4.$k6}toString(){return"Disk with software"}}class _{constructor(e,t){this.x=e,this.y=t}toString(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(this.x),t=this.y+1;return"[".concat(e,":").concat(t,"]")}$X5(){return new _(this.x,this.y)}}class y{constructor(e,t,s){this.$N3=0,this.$h=0,this.$=e,this.$M3=new _(t,s),this.$x3=!1,this.$q2=[],this.$_3=[],this.$v2="",this.$C5="room",this.$V5=0,this.$O6=null,this.$c3=0,this.$n4={n:null,e:null,s:null,w:null},this.$B5=0,this.$o=new _(0,0)}$V4(e,t,s){this.$B5=e,this.$o.x=t,this.$o.y=s}$b2(e,t){var s=0;return this.$B5&&e==this.$o.x&&t==this.$o.y&&(s=this.$B5,this.$V5=this.$B5,this.$q2.forEach((e=>e())),this.$B5=0,this.$N5()),s}$l4(){return this.$.$V3}$B4(e){this.$C5=e}$N4(){return 0==this.$c3?"empty":this.$C5}$M4(e,t){this.$n4[t]=e,this.$c3++}$k4(){return this.$n4}$j(e){for(var t in this.$n4)if(this.$n4[t]==e)return t;return null}$X2(){return this.$M3}$M5(){this.$l4()&&(this.$x3||(this.$N3=20,this.$x3=!0,this.$q2.forEach((e=>e()))))}$N5(){this.$h+=3}$G3(){return this.$x3}$m4(e){this.$q2.push(e)}$_4(e){this.$_3.push(e)}$v3(){if(!this.$l4())return[];var e=this.$_3;return this.$_3=[],e}$S(){return this.$l4()?this.$v2:"We've got total s{darkness}s here. Can't see anything. There is no point to explore this location. Try to turn the lights on at first."}$Q4(e){this.$v2=e}}class v{constructor(e,t,s){this.user=e,this.question=t,this.answer=s}$G5(e){return!!e.match(this.answer)}}class w{constructor(){this.$P6="d"+Math.floor(16*Math.random()).toString(16)+w.$4.toString(16),this.$P6=this.$P6.toUpperCase(),w.$4++,this.$M3=null,this.$3=null,this.$q4=!1,this.$q2=[],this._room1$$=null,this._room2$$=null,this.$W4=!1,this.$n2=null,this.$s=null,this.$_5="standard"}$C2(e,t){this._room1$$=e,this._room2$$=t;var s=e.$X2(),i=t.$X2();this.$M3=new _((s.x+i.x)/2,(s.y+i.y)/2);var o=Math.abs(s.x-i.x),r=Math.abs(s.y-i.y);this.$3=o>r?90:0}$X2(){return this.$M3.$X5()}$V2(){return this.$3}$F5(){return this.$q4=!0,this.$q2=this.$q2.filter((e=>!e())),this}$x6(){return this.$q4=!1,this.$q2=this.$q2.filter((e=>!e())),this}$z4(){return this.$q4}$m4(e){this.$q2.push(e)}$G3(){return this._room1$$.$G3()||this._room2$$.$G3()}$m6(e,t,s){return this.$s=new v(e,t,s),this}$g5(){this.$s=null}$L4(){return this.$s}$I(){return this.$n2}$b3(e){return this.$n2=e,this}$x5(){return this.$W4=!0,this}$H3(){return this.$W4}}w.$4=0;const b=w;class S{constructor(){this.$E4=!1,this.$R4="20.110.231.18",this.$B2=null,this.$w2=null,this.$w4=[],this.$n3=250,this.$r=.8,this.$k=[]}$N2(e){this.$k.push(e)}$p(e){return e!=this.$R4?"Unable to establish connection with the host!":this.$m3(e)?"Host already infected!":null}$g(){if(this.$Z3().stats.infection<this.$r){var e="Infection coverage must be at least ".concat(Math.round(100*this.$r),"% to activate the virus.");return 0==this.$Z3().stats.infection&&(e+="<br />\nRun s{virus infect [host]}s at first"),e}return this.$E4?"Already activated":null}$m3(e){return this.$w4.filter((t=>t.ip==e)).length>0}$j5(e){var t=this.$R4;return e==t&&(this.$B2&&(clearInterval(this.$B2),this.$B2=null),this.$w4.push({ip:t,active:!1}),this.$B2=setInterval((()=>{t=this.$t(),this.$m3(t)||this.$w4.push({ip:t,active:!1}),this.$w4.length>=this.$n3&&(clearInterval(this.$B2),this.$B2=null)}),100),!0)}$Z3(){return{hosts:this.$w4,stats:{infection:this.$w4.length/this.$n3,activation:this.$w4.filter((e=>e.active)).length/this.$n3}}}$c4(){return!(this.$Z3().stats.infection<this.$r)&&(this.$w2&&(clearInterval(this.$w2),this.$w2=null),this.$w2=setInterval((()=>{this.$w4[Math.floor(Math.random()*this.$w4.length)].active=!0}),30),this.$E4=!0,this.$k.forEach((e=>e())),!0)}$t(){return"20.110.231.".concat((()=>Math.floor(18+Math.random()*(this.$n3+5)))())}}class k{constructor(e,t){this.x=e,this.y=t}}class I{constructor(e,t,s){this.$Q6=()=>{},this.$5=e,this.$q6=t,this.$c5=s,this.$q5=[],this.$e2=[],this.$b=[new k(.39,1.04),new k(.6,1.05),new k(.33,1.11),new k(.24,1.05),new k(.69,1.09)],this.$D=[new k(.45,.98),new k(.55,.98),new k(.33,1.08),new k(.26,1.05),new k(.65,1.04)],this.$w6=null,this.$M2=-100,this.$l=!1,this.$m2=!1,this.$r2=0;for(var i=this.$5.$V5,o=0;o<i;o++)this.$e4();var r=this.$J4().$k4();r.n==t?this.$L5=!0:r.e==t?this.$z5=!0:r.w==t&&(this.$z5=!0,this.$Z5=!0)}$r4(e){this.$Q6=e}$b4(e){this.$e2.push(e)}$Q2(){return this.$l}$t2(){return this.$m2}$e6(){this.$w6=setInterval((()=>this.$r6()),30)}$b6(){this.$w6&&(clearInterval(this.$w6),this.$w6=null)}$J4(){return this.$5}$w5(){return this.$q6}$B3(){return this.$q5}$Q3(){return this.$m2?this.$D:this.$b}$e4(){this.$q5.push(new k(.1+.8*Math.random(),.1+.3*Math.random()+.4*Math.random()*Math.random()))}$r6(){if(0==this.$q5.length)return this.$b6(),this.$5.$V5=0,void this.$e2.forEach((e=>e()));var e=this.$c5.$Z3().stats.activation;if(this.$M2>70&&this.$q5.length<8)if(this.$M2=0,Math.random()>e)this.$e4(),this.$Q6("MSG [to: sig18/".concat(Math.floor(34952*Math.random()).toString(16),', body: "Backups to ').concat(this.$5.$X2().toString(),'"]'));else if(Math.random()>.5){var t=["&amp;","&lt;","&gt;","\t&iexcl;","&cent;","&pound;","&curren;","&yen;","&sect;","&copy;","&laquo;","&reg;","&plusmn;","&micro;","&para;","&raquo;","\t&Oslash;","&Uuml;","&aelig;","&ntilde;","&thorn;","&frac12;","&iquest;","&divide;","&deg;","^","!","@","#","$","%","^","*","_","=","+","1","2","3","4","5","6","X","o","T","I","q",":",":","|","\\","/",".",",","[","}","{","]"],s=Array(10+Math.floor(10*Math.random())).fill(0).map((()=>t[Math.floor(Math.random()*t.length)])).join("");this.$Q6('MSG [to: sig18/*, body: "'.concat(s,'"]'))}0==this.$r2&&this.$M2>=0&&(this.$r2=Math.random()>.5?30+30*Math.random():-15-15*Math.random(),this.$r2<0&&Math.random()>.5&&this.$q5.length>0&&this.$q5.length<=10&&(e>0||this.$q5.length>1)&&this.$q5.shift(),this.$r2=Math.round(this.$r2));if(this.$l=!1,this.$m2=!1,this.$r2>8?this.$l=!0:this.$r2<-8&&(this.$m2=!0),this.$M2++,this.$r2>0?this.$r2--:this.$r2<0&&this.$r2++,this.$5.$O6&&(this.$5.$O6.step(),this.$5.$O6.$l3)){for(var i=[],o=0;o<this.$q5.length;o++){var r=this.$q5[o].x-this.$5.$O6.$l5.x,$=this.$q5[o].y-this.$5.$O6.$l5.y;(Math.sqrt(r*r+$*$)>.08||Math.random()<.9)&&i.push(this.$q5[o])}this.$q5=i}}}class C{constructor(e,t){this.$v5=!1,this.$W6=t,this.$W3=e}$h4(e){e==this.$W3&&(this.$v5=!0)}}class x{constructor(){this.$b5=0,this.$_2=[new C("item-disk-door","Explore available rooms of the station. Search for software tools that could open the doors. Run s{com help}s and read the description of s{com go}s command to learn how to navigate."),new C("door-open-standard","Explore locations behind closed doors. To open door on the north run s{door open n}s"),new C("item-disk-crew","Go to office area m{([B:4])}m and search for crew records. It contains important information required in the exploration of the space station."),new C("door-open-commander","Go to Commander's Quarter m{([A:6])}m. Opening the door requires answering a security question. Find the answer by running s{crew show swoodley}s."),new C("item-disk-virus","Search Commander's Quarter m{([A:6])}m."),new C("battle-start","Search unvisited rooms of the space station. You can skip parts of the station where there is no light because you cannot see anything there anyway"),new C("item-static","Find communication module of SIG-18 to infect it by the virus and disrupt communication between SIG-18s. It will block them in calling backups during a fight."),new C("com-virus-activate","If you are in the middle of a fight you can always close doors and stop it by s{door close X}s. We need you to block SIG-18 communication. Check host address of SIG-18 communication module that you have found by running s{com status}s. Next, run s{virus infect 20.110.231.18}s. Wait until the virus spreads and activate it by s{virus activate}s. Now we will be able to defeat SIG-18 squads"),new C("item-key-red","Find a red key card in the room of the crew, occupied currently by SIG-18 squad m{([B:7])}m. We will defeat SIG-18 now since the virus blocked communication between them."),new C("door-open-red","Use red key card to access the service area at the end of the northern corridor behind the Lobby m{([D:1])}m"),new C("item-disk-proj","Go to the main lobby m{([D:4])}m and search for software there."),new C("door-open-core-comp","Go to computing core m{([E:1])}m. To unlock the account and open the door you need to answer a security question. The answer can be found in the project log. Run s{proj help}s for more info."),new C("item-disk-power","Search computing core room m{([E:1])}m"),new C("com-lights-east-on","Turn lights in eastern part of the station by running s{power up lights-east}s. Powering down of some services may be required to have enough power. Check the list of services by running s{power list}s and turn selected services off by s{power down X}s. Do not be afraid of powering down the oxygen generator. We've got masks!"),new C("item-key-yellow","Find a yellow key card in the kitchen located in the eastern part of the station m{([F:7])}m"),new C("door-open-yellow","Use yellow key card to access lab area on the east m{([H:4])}m"),new C("door-open-lab-server","Go to server room of the lab m{([H:5])}m. To unlock the account and open the door you need to answer a security question. The answer can be found in the crew directory. Find names of all engineers by running s{crew list}s and try them all as the answer. First name of one of them will unlock the account."),new C("item-disk-gun","Search the server room of the lab m{([H:5])}m for software required to control BER-84 sentry gun."),new C("item-disk-sniff","Search the meeting room of the lab m{([I:4])}m for a software."),new C("com-security-on","You must start security service to get access to BER-84 sentry gun in security checkpoint m{[G:4]}m. It requires multi-factor authentication so you have to sniff text message with the code. Run sniffer in the background by s{sniff on message-hub}s. Next, power up the service by s{power up security}s. When asked for the auth code, rewrite it from sniffer window."),new C("battle-won-6-3","Go to security checkpoint m{[G:4]}m and attack SIG-18s that are awaiting there. During the battle run s{gun control}s to use BER-84 sentry gun and defeat SIG-18's forces"),new C("item-key-blue","Find a blue key card in the server room of the lab m{([H:3])}m"),new C("door-open-blue","Use blue key card to access the main warehouse on the south m{([E:8])}m."),new C("item-disk-dock","Find application to manage docks in the warehouse m{([E:8])}m."),new C("item-note","Find rescue capsule auth code in the warehouse of the lab area on the east m{([H:3])}m."),new C("com-pump-station-on","Turn pump station to fuel rescue capsule by running s{power up pump-station}s. Powering down of some services may be required to have enough power. Check the list of services by running s{power list}s and turn selected services off by s{power down X}s."),new C("","Enter rescue capsule m{([D:10])}m. Close its door by running s{door close X}s. Next, fuel the capsule by s{dock fuel DS002}s command and launch it running s{dock launch DS002}s. If you do not remember auth code that you have already found, run s{com status}s")]}$2(e){this.$_2.forEach((t=>t.$h4(e))),this.updateLevel()}updateLevel(){this.$b5=0;for(var e=0;e<this.$_2.length&&this.$_2[e].$v5;e++)this.$b5++}$e5(){return this.$_2[this.$b5]?this.$_2[this.$b5].$W6:"You can figure it out by yourself"}}const T=class{constructor(e,t,s){this.$k6=e,this.$A6=t,this.$X4=[],this.$U6("Reading /etc/".concat(e,".conf"),976601),this.$U6("Configuration file loaded",870323),this.$U6("Service ".concat(e," started at ").concat(t),732875),this.$V3=!0,this.$C3=!1,this.$d=s,this.$i=[]}$v4(){return this.$V3?this.$d:0}$n5(){return this.$C3=!0,this}$S6(){return this.$V3||(this.$V3=!0,this.$U6("Power up ".concat(this.$k6," service")),this.$i.forEach((e=>e(!0)))),this}$I6(){return this.$V3&&(this.$V3=!1,this.$U6("Power down ".concat(this.$k6," service")),this.$i.forEach((e=>e(!1)))),this}$F(e){this.$i.push(e)}$U6(e,t){for(t=t||0,this.$X4.push((new Date).getTime()%864e5-t+1e6+" | "+e);this.$X4.length>8;)this.$X4.shift()}};class P{constructor(){this.$t6=[],this.$n=75.48,this.$E3("power-manager","40.32.125.1",4),this.$E3("message-hub","40.32.125.68",3),this.$E3("docker","40.32.125.120",12),this.$E3("lights-east","40.32.125.231",13).$I6(),this.$E3("lights-west","40.32.125.232",11),this.$E3("monitoring","40.32.125.12",6),this.$E3("oxygen-generator","40.32.125.193",13),this.$E3("pump-station","40.32.125.43",20).$I6(),this.$E3("data-warehouse","40.32.125.73",14),this.$E3("lab-services","40.32.125.100",19).$I6(),this.$E3("security","40.32.125.87",10).$I6().$n5(),this.$E3("doors","40.32.125.133",11),[[543299,"Security breach detected at [G:4]"],[542904,"r{Unauthorized access to yellow restricted area}r"],[483843,"Security breach detected at [F:8]"],[481275,"r{Unauthorized access to blue restricted area}r"],[359939,"Security breach detected at [F:8]"],[341905,"The gateway not compromised."],[340320,"Red restricted area secured"]].forEach((e=>this.$k3("monitoring").$U6(e[1],e[0]))),[[692313,"Starting launching sequence at DS001"],[687240,"Launching sequence completed"],[323955,"s{Sierra-23}s is approaching DS003"],[314980,"Error: docking station damaged during landing"]].forEach((e=>this.$k3("docker").$U6(e[1],e[0]))),[[594312,"r{WARNING! Power outage detected}r"],[582733,"Reducing power consumption..."],[578269,"Non critical services stopped"]].forEach((e=>this.$k3("oxygen-generator").$U6(e[1],e[0]))),[[594396,"r{WARNING! Power outage detected}r"],[582734,"Reducing power consumption..."],[581191,"Power down lights-east service"]].forEach((e=>this.$k3("lights-east").$U6(e[1],e[0])))}$P(){return this.$n}$E3(e,t,s){var i=new T(e,t,s);return this.$t6.push(i),i}$A(){return this.$t6}$k3(e){var t=this.$t6.filter((t=>t.$k6==e));return t.length?t[0]:null}$N(){return this.$t6.reduce(((e,t)=>e+t.$v4()),0)}$u(e,t){var s=this.$k3(e);if(!s)return"Service ".concat(e," not found");if(s.$V3==t)return"Service ".concat(e," (").concat(s.$k6,") is already ").concat(t?"running":"stopped",".");var i=this.$N()+s.$d-this.$P();return t&&i>0?"Not enough power: s{".concat(i.toFixed(2),"kW}s is missing.<br/>\nTry to turn off some services.<br/>\nRun s{power list}s to review available services."):void 0}$S6(e){this.$k3(e).$S6()}$I6(e){this.$k3(e).$I6()}}class D{constructor(e,t){var s=this;this.$W2=new x,this.$L3=new P,this.$G=null,this.$c5=new S,this.$r5=null,this.$t4=[],this.$n4={},this.$y6=[],this.$q2=[],this.$q3=null,this.$c5.$N2((()=>{this.$W2.$2("com-virus-activate")})),this.$L3.$k3("lights-east").$F((e=>{this.$W2.$2("com-lights-east-"+(e?"on":"off"))})),this.$L3.$k3("security").$F((e=>{this.$W2.$2("com-security-"+(e?"on":"off"))})),this.$L3.$k3("pump-station").$F((e=>{this.$W2.$2("com-pump-station-"+(e?"on":"off"))}));for(var i=this.$L3.$k3("lights-west"),o=this.$L3.$k3("lights-east"),r=0;r<e;r++){this.$y6[r]=[];for(var $=function(e){var t=r>=4&&8!=e&&0!=e||r>=5&&(8==e||0==e)?o:i,$=new y(t,r,e);t.$F((e=>{e&&$==s.$y6[s.$G.x][s.$G.y]&&($.$M5(),s.$y2("light"))})),s.$y6[r][e]=$,s.$y6[r][e].$m4((()=>s.$y2("room")))},n=0;n<t;n++)$(n)}}$O(){var e=this.$t4.filter((e=>"capsule"==e.$_5));return 0==e.length?null:e[0]}$y(){return this.$L3}$w3(e){this.$m5=e}$j4(){return this.$m5}$u2(){return this.$W2}$F3(){return this.$r5}$e3(e,t){this.$W2.$2("battle-start"),this.$r5=new I(e,t,this.$c5),this.$r5.$e6(),this.$r5.$r4((e=>this.$L3.$k3("message-hub").$U6(e))),this.$r5.$b4((()=>{var e=this.$r5.$J4().$X2();this.$W2.$2("battle-won-"+e.x+"-"+e.y)}))}$R3(){this.$r5&&(this.$r5.$b6(),this.$r5=null)}$x4(){return this.$c5}$z(e,t){this.$G=new _(e,t),this.$y2("squad")}$f(){return this.$G.$X5()}$t5(e,t){return!(!this.$y6[e]||!this.$y6[e][t])}$J4(e,t){if(!this.$y6[e]||!this.$y6[e][t])throw new Error("Room not found");return this.$y6[e][t]}$M4(e,t,s,i){var o=this.$J4(e,t),r=this.$J4(s,i),$=new b;return s-e==-1&&i==t?(o.$M4($,"w"),r.$M4($,"e")):s-e==1&&i==t?(o.$M4($,"e"),r.$M4($,"w")):s==e&&i-t==-1?(o.$M4($,"n"),r.$M4($,"s")):s==e&&i-t==1&&(o.$M4($,"s"),r.$M4($,"n")),$.$C2(o,r),this.$t4.push($),this.$n4[$.$P6]=$,$.$m4((()=>this.$y2("door"))),$.$m4((()=>{var e="door-";e+=$.$z4()?"close":"open",e+="-"+$.$_5,this.$W2.$2(e)})),$}$r3(){return this.$t4}$t3(e){return e=e.toUpperCase().replace("O","0"),this.$n4[e]}$m4(e){this.$q2.push(e)}$y2(e){this.$q2.forEach((t=>t(e)))}}class E{constructor(e){this.$D4=e,this.$y4=!0,this.$K2=e.$U(),this.$j6=null,this.$y5=e.$B(),this.$D3=e.$H2(),this.$T3=[],this.$y3=null,this.$i2={n:"north",s:"south",e:"east",w:"west"}}$Q5(e){this.$j6=e,this.$j6.$m4((e=>{if("light"==e&&!this.$y4){var t=this.$j6.$f();this.$j6.$J4(t.x,t.y).$l4()&&(this.$y4=!0,this.onLights())}}))}$R3(){this.$y3&&clearTimeout(this.$y3);var e=this.$j6.$F3().$B3().length,t=0==e;this.$j6.$R3();var s,i=this.$j6.$f(),o=this.$j6.$x4().$E4;this.$y5.$G4(this.$j6),s=t?"Enemy defeated!":"Thanks! We're at safe spot now: m{".concat(i.toString(),"}m. That was close!"),t||(e>10?s+=" They are too many of them. We need another way to defeat them.":o||(s+=" They are calling backups. You must block their communication, so we can defeat them in smaller groups.")),this.$D3.$u4([["commander",s]])}$e3(e,t,s){this.$j6.$e3(e,t);var i=this.$j6.$F3(),o=this.$j6.$f();i.$b4((()=>this.$R3()));var r=i.$B3().length,$="".concat(r," armed, battle droid").concat(r>1?"s":""," SIG-18");this.$D3.$g4([{c:e=>this.$y5.$Y3(i,e)},{c:"chat",d:[["commander","Enemy units encountered m{(".concat($,")}m.")],["commander","We have been spotted. SIG-18 opened fire! <br/>We are trying to push back the attack..."]]},{c:s}]);var n=()=>{var t,s=this.$j6.$J4(o.x,o.y).$j(i.$w5());s=this.$i2[s];var $=this.$j6.$x4().$E4,a="s{close the door on the ".concat(s,"}s");e.$O6&&(a="use s{sentry gun m{BER-84}m}s or "+a),t=r>10?["We cannot push them back! ".concat(a),"There are too many of them! ".concat(a),"They are too strong! ".concat(a),"Heavy fire! ".concat(a,"! We cannot push them back!")]:$?["The virus is active, we are pushing them back!","They cannot get backups anymore!","The virus is working! Good job!","They are losing!","We will defeat them!"]:["We cannot push them back, they bring backups! s{close the door on the ".concat(s,"}s to secure our position!"),"There are too many of them! s{Close the door on the ".concat(s,"}s to isolate them"),"They are getting backups! s{Close the door on the ".concat(s,"}s to stop them!"),"There is more of them! s{Close door on the ".concat(s,"}s!"),"Heavy fire! Backups have arrived! s{Close that door on the ".concat(s,"}s! We cannot push them back!")],(!$||Math.random()>.6)&&(e.$O6&&e.$O6.$k5||this.$D3.$u4([["commander",t[Math.floor(Math.random()*t.length)]]])),this.$y3=setTimeout(n,1e4)};this.$y3=setTimeout(n,5e3),t.$m4((()=>!this.$j6.$F3()||!!t.$z4()&&(this.$R3(),!0)))}onLights(){var e=this.$j6.$f(),t=this.$j6.$J4(e.x,e.y).$v3();this.$H(t);var s=t.filter((e=>"disk"==e.$c6)),i="Lights on! ".concat(this.$j6.$J4(e.x,e.y).$S());t.length>0&&(i+="m{<br/><br/>We have found:<br/>",t.forEach((e=>i+=" * ".concat(e,"<br/>"))),i+="}m"),this.$D3.$g4({c:"off",t:0},{c:"chat",d:i,f:"commander"},{c:e=>{s.length>0?this.$D3.$J(s,(()=>{e()})):e()}},{c:"on"})}$u3(e,t){var s=[],i=[],o=[],r="",$=this.$j6.$f(),n=this.$j6.$J4($.x,$.y),a=n.$k4()[e];if(n.$l4()||a&&!a.$z4()?a?a.$z4()&&(r="The door is closed. ",r+=this.$D4.$U3("door")?"Use s{door}s app to open them.":"Explore other locations and find a way to open them."):r="No doors on that side.":r="We've got total s{darkness}s here. Can't see anything. There is no point to explore this location. Try to turn the lights on at first.",s.push(["hacker","Commander, check the door on the ".concat(this.$i2[e],".")]),this.$j6.$F3())s.push(["commander","r{We are under fire!}r Cannot move anywhere!"]),i.push({c:"chat",d:s});else if(r)s.push(["commander","Cannot move to the ".concat(this.$i2[e],"! ").concat(r)]),i.push({c:"chat",d:s});else{var h=0,c=0;switch(e){case"n":c=-1;break;case"s":c=1;break;case"w":h=-1;break;case"e":h=1}var l=($=this.$j6.$f()).x+h,d=$.y+c,u=this.$j6.$J4(l,d);if(u.$V5>0)return u.$M5(),u.$N5(),void this.$D3.$g4({c:"chat",d:s},{c:()=>this.$e3(u,a,(()=>t(o)))});var m=this.$j6.$J4($.x,$.y).$b2(l,d);this.$j6.$J4(l,d).$M5(),this.$j6.$z(l,d),this.$y4=this.$j6.$J4(l,d).$l4(),o=this.$j6.$J4(l,d).$v3(),this.$H(o),$=this.$j6.$f();var p="Location m{".concat($.toString(),"}m secured. ").concat(this.$j6.$J4($.x,$.y).$S());s.push(["commander",p]),i.push({c:"chat",d:s}),s=[],o.length>0&&(p="We have found something:m{<br/>",o.forEach((e=>p+=" * ".concat(e,"<br/>"))),p+="}m",i.push({c:"off"}),i.push({c:"chat",d:p,f:"commander"}),i.push({c:"on"})),m&&s.push(["commander","It was a trap! There are ".concat(m," SIG-18 units blocking the entrance at ").concat($.toString(),".")]),o.filter((e=>"disk"==e.$c6)).length>0&&s.push(["commander","I've got a data storage here! Uploading..."]),s.length>0&&i.push({c:"chat",d:s})}i.push({c:()=>{t(o)}}),this.$D3.$g4(i)}$o2(e){var t=this.$X2(),s=this.$j6.$F3()?"r{We are under attack!}r ":"",i="m{Our current position is ".concat(t.toString(),".}m ").concat(s).concat(this.$j6.$J4(t.x,t.y).$S(),"<br/>\n");this.$j6.$J4(t.x,t.y).$k4();i+="m{<br/>\nInventory:<br/>\n",0==this.$T3.length&&(i+=" * nothing<br/>\n"),this.$T3.forEach((e=>{i+=" * ".concat(e,"<br/>\n")})),i+="}m",this.$D3.$g4({c:"chat",d:[["hacker","Commander, what's going on?"],["commander",i]]},e)}$H(e){this.$T3=this.$T3.concat(e.filter((e=>"disk"!=e.$c6))),e.forEach((e=>this.$j6.$u2().$2("item-"+e.$P6)))}$X2(){return this.$j6.$f()}$x2(){return this.$T3}}class M{constructor(e){this.$i4=e,this.$u6=null}$p2(e,t){var s={element:this.$i4.createElement(e)};return t.cssClass&&s.element.classList.add(t.cssClass),t.parent&&this.$a2(s,t.parent),s}$a2(e,t){t.element.appendChild(e.element)}$W5(){return this.$u6.element}$i3(e){e.appendChild(this.$W5())}}class A extends M{constructor(e){super(e),this.$E5=0,this.$T4=!1,this.$R5=150,this.$u6=this.$p2("CANVAS",{cssClass:"digital-noise"}),this.$Y4=this.$u6.element.getContext("2d"),this.$w6=setInterval((()=>this.$T5()),40),window.addEventListener("resize",(()=>this.$u5())),window.addEventListener("load",(()=>this.$u5()))}$u5(){var e=this.$u6.element;e.width=e.parentElement.clientWidth,e.height=e.parentElement.clientHeight}$U4(e,t,s,i,o){var r=this.$u6.element.width,$=this.$u6.element.height,n=this.$Y4;n.fillStyle=o,n.beginPath(),n.rect(e*r,t*$,s*r,i*$),n.fill()}$e6(){this.$T4=!0,this.$E5=0}$J5(e){this.$T4=!0,this.$E5=-e}$i5(){this.$E5=100}$T5(){var e=Math.random;if(this.$T4){if(this.$E5++,this.$Y4.clearRect(0,0,this.$u6.element.width,this.$u6.element.height),this.$E5>this.$R5)return this.$E5=0,void(this.$R5=450-e()*e()*e()*300);if(!(this.$E5>20))for(var t=20*e(),s=e()>.1?"#001100":"#88ff22",i=0;i<t;i++)this.$U4(e(),e(),.2*e(),e()*e()*.2,s)}}}class L extends M{constructor(e){super(e),this.$w=[],this.$Y5=0,this.$s2=0,this.$E2=[];try{var t=localStorage.getItem("history")||"[]";this.$E2=JSON.parse(t)}catch(e){console.error(e)}this.$I4=[""].concat(this.$E2),this.$d2=0,this.$m=this.$f2,this.$g2=this.$o3,this.$R2=null,this.$R2$E6=0,this.$I3=[],this.$I3[38]="com go n",this.$I3[40]="com go s",this.$I3[37]="com go w",this.$I3[39]="com go e",this.$u6=this.$p2("DIV",{cssClass:"terminal-root"}),this.$h5=new A(e),this.$u6.element.appendChild(this.$h5.$W5()),this.$h5.$e6(),this.$u6.output=this.$p2("DIV",{cssClass:"terminal-output",parent:this.$u6}),this.$u6.popup=this.$p2("DIV",{cssClass:"terminal-popup",parent:this.$u6}),this.$u6.input=this.$p2("DIV",{cssClass:"terminal-input",parent:this.$u6}),this.$u6.input.table=this.$p2("TABLE",{parent:this.$u6.input}),this.$u6.input.table.tr=this.$p2("TR",{parent:this.$u6.input.table}),this.$u6.input.table.tr.prompt=this.$p2("TD",{cssClass:"terminal-prompt",parent:this.$u6.input.table.tr}),this.$u6.input.table.tr.content=this.$p2("TD",{cssClass:"terminal-textfield-container",parent:this.$u6.input.table.tr}),this.$u6.input.textField=this.$p2("INPUT",{parent:this.$u6.input.table.tr.content}),this.$M(),this.$u6.input.textField.element.addEventListener("keydown",(e=>{this.$m(e,this.$u6.input.textField.element.value),this.$h5.$i5()})),this.$u6.input.textField.element.addEventListener("keyup",(e=>{this.$g2(e,this.$u6.input.textField.element.value),this.$h5.$i5()}))}$J3(e){this.$u6.popup.element.style.display="block",this.$u6.popup.element.style.bottom="100%",this.$u6.popup.element.style.overflow="hidden";var t=e?0:15,s=setInterval((()=>{t+=e?1:-1,this.$u6.popup.element.style.bottom=Math.round(100-50*t/15)+"%",(e&&t>=15||!e&&t<=0)&&(clearInterval(s),this.$u6.popup.element.style.bottom="",this.$u6.popup.element.style.overflow="",this.$u6.popup.element.style.display=e?"block":"none")}),30)}$K(e){this.$R2$E6=e?(new Date).getTime():0,this.$R2=e}$x(){if(this.$R2&&!((new Date).getTime()-this.$R2$E6>500)&&this.$m==this.$f2&&this.$o4()){var e=this.$R2;this.$R2=null,this.$m&&this.$m(e),this.$o4()&&1==e.key.toString().length&&(this.$u6.input.textField.element.value+=e.key)}}$_(e,t){this.$m=e||this.$f2,this.$g2=t||this.$o3,this.$x()}$T2(e){this.$u6.input.textField.element.value=e}$o3(e,t){}$f2(e,t){var s=()=>{this.$T2(this.$I4[this.$d2]),setTimeout((()=>{this.$u6.input.textField.element.selectionStart=this.$u6.input.textField.element.selectionEnd=1e4}),0)};if(e.stopImmediatePropagation(),this.$I3[e.keyCode]&&e.shiftKey)return this.$T2(this.$I3[e.keyCode]),void this.$U5();switch(e.keyCode){case 13:this.$I4[this.$d2]=t,this.$U5();break;case 38:this.$d2=Math.min(this.$I4.length-1,this.$d2+1),s();break;case 40:this.$d2=Math.max(0,this.$d2-1),s();break;default:this.$I4[this.$d2]=t}}$M(e){this.$u6.input.table.tr.prompt.element.innerHTML=void 0!==e?e.replace(/ /g,"&nbsp;"):"hacker@sigma18.iss.gov&nbsp;~$"}$U5(){var e=this.$u6.input.textField.element.value.trim();if(""!=e){for(this.$E2.unshift(e);this.$E2.length>100;)this.$E2.pop();this.$I4=[""].concat(this.$E2),this.$d2=0;try{localStorage.setItem("history",JSON.stringify(this.$E2))}catch(e){console.error(e)}this.$O3(),this.$w.forEach((t=>t(e)))}else this.$u6.input.textField.element.value=""}$O3(){this.$T2("")}$Q(){this.$u6.input.textField.element.addEventListener("focusout",(()=>{this.$u6.input.textField.element.focus()})),this.$u6.input.textField.element.focus()}$I5(e){return e.replace(/m{/g,"").replace(/}m/g,"").replace(/s{/g,"<strong>").replace(/}s/g,"</strong>").replace(/r{/g,'<span class="red">').replace(/}r/g,"</span>")}$i6(e){e=this.$I5(e);var t=this.$u6.output.element,s=t.innerHTML;s=(s+=e).substring(s.length-2e4),t.innerHTML=s,t.scrollTop=t.scrollHeight,this.$h5.$i5()}$z3(e,t){t=this.$I5(t),this.$u6.popup.element.innerHTML="<h1>".concat(e,"</h1>").concat(t)}$o5(e){e=e||"";var t="ref-terminal-line-"+this.$Y5++;return this.$i6('<span id="'.concat(t,'">').concat(e,"</span><br/>\n")),document.getElementById(t)}$O4(e){this.$w.push(e)}$o4(){return this.$s2<=0}$F4(){this.$s2++,this.$u6.input.textField.element.disabled=!0,this.$M("...")}$d5(){this.$s2--,this.$s2=Math.max(0,this.$s2),0==this.$s2&&(this.$u6.input.textField.element.disabled=!1,this.$M(),this.$u6.input.textField.element.focus(),this.$x())}$i3(e){super.$i3(e),this.$Q(),this.$h5.$u5()}}class q{constructor(e){this.$a=null,this.$h6=e,this.$K2=null,e.$O4((e=>this.$W(e))),this.$P4=null,this.$D4=null,document.addEventListener("keydown",(e=>{this.$h6.$o4()||e.ctrlKey||this.$K2.$g6("err")}))}$U6(e,t){this.$a.$k3(e).$U6(t)}$K4(e,t,s){var i=e=>{this.$g4("","Error: "+e,{c:"sound",d:"err"},{c:"on"})};this.$g4("Connecting to the gateway 10.43.23.4...","Connection established","Service Discovery in progress...",{c:()=>{var o=this.$a.$k3(e);if(!o)return i("Cannot find service "+e);if(!o.$V3)return i("Service s{".concat(o.$k6,"}s is down.<br />\nTry turn it on by s{power up ").concat(o.$k6,"}s"));var r=["Service ".concat(o.$k6," found at ").concat(o.$A6),{c:"ln",d:"",t:300}];(r=r.concat(t)).push({c:()=>s()}),this.$g4(r)},t:300})}$W(e){this.$h6.$i6('<div class="terminal-command">s{&gt;}s '.concat(e,"</div>")),e=(e=(e=e.split(" ")).map((e=>e.trim()))).filter((e=>""!=e)),this.$D4.$L(e)||(this.$H4("Error: Command s{".concat(e[0],"}s not found!")),this.$H4("Run s{help}s to list all available commands"),this.$K2.$g6("err"))}setSystem(e){this.$D4=e,this.$a=e.$s5().$y(),this.$K2=e.$U()}$J3(e){this.$h6.$J3(e),this.$K2.$g6("ok")}$K5(e){var t=this.$h6.$o4();this.$h6.$d5(),this.$h6.$_((s=>{s.stopImmediatePropagation(),s.preventDefault(),this.$h6.$O3(),13==s.keyCode||s.ctrlKey?(this.$h6.$_(),t||this.$h6.$F4(),e()):this.$K2.$g6("err")})),this.$h6.$M("Press ENTER to continue")}$f5(e,t){var s=this.$h6.$o4();this.$h6.$d5(),this.$h6.$_(((e,i)=>{(13==e.keyCode||e.ctrlKey)&&(e.stopImmediatePropagation(),e.preventDefault(),this.$h6.$O3(),s?this.$h6.$M():this.$h6.$F4(),this.$h6.$_(),t(i))})),this.$h6.$M(e)}$H4(e,t){this.$h6.$i6(e+"<br/>\n"),t&&this.$U6(t,e)}$u4(e,t){var s=0,i=!1,o=t=>{if(!i){var r=e[s][0],$=e[s][1];s++,this.$c(r,$,(()=>{s<e.length?o(t):t()}))}},r=()=>{if(!i){for(;s<e.length;){var t=e[s][0],o=e[s][1];this.$q(t,o),s++}this.$h6.$O3(),this.$h6.$F4(),this.$h6.$_()}},$=!this.$h6.$o4();$&&t&&(this.$h6.$d5(),this.$h6.$M("Press any key to skip..."),this.$h6.$_((e=>{e.stopImmediatePropagation(),e.preventDefault(),this.$h6.$K(e),this.$K2.$O5(),r(),i||(i=!0,t())}))),o((()=>{$&&t&&r(),i||(i=!0,t&&t())}))}$c(e,t,s){this.$q(e,t),this.$K2.$o6(t,"hacker"!=e,(()=>{s()}))}$q(e,t){var s="hacker"==e?"terminal-chat-left":"terminal-chat-right";this.$h6.$i6('<div class="terminal-chat '.concat(s,'"><small>').concat(e,"</small><p>").concat(t,"</p></div>"))}$p4(e,t,s){this.$K2.$g6("beep");var i=this.$h6.$o5(),o=i.id,r=setInterval((()=>{(i=document.getElementById(o)).innerHTML=t+": "+Math.round(1e9*Math.random()).toString(16),--e<=0&&(clearInterval(r),i.innerHTML=t+": ********",this.$K2.$b6("beep"),s())}),30);this.$P4=i}$c2(e,t){e=e||0,e=Math.max(0,Math.min(100,e)),e=Math.round(e),t=t||this.$h6.$o5(),t=document.getElementById(t.id);var s=Math.round(e/100*40),i="=".repeat(s),o="&nbsp;".repeat(40-s);return t.innerHTML="[".concat(i).concat(o,"]  ")+e+"%",t}$v(e){this.$K2.$g6("beep");var t=this.$c2(),s=t.id,i=0,o=setInterval((()=>{t=document.getElementById(s),this.$c2(i,t),(i+=2)>=100&&(this.$c2(100,t),clearInterval(o),this.$K2.$b6("beep"),e())}),30);this.$P4=t}$J(e,t){var s=(e=e||[]).map((e=>e.$C4.$k6));this.$g4({c:"sound",d:"ok",t:100},"","Transferring disk data: s{".concat(s.join(", "),"}s app."),{c:"load"},"App downloaded","",{c:"ln",d:"Installing s{".concat(s.join(", "),"}s app."),t:500},{c:"load"},{c:()=>{e.forEach((e=>this.$D4.$Z(e.$C4)))}},"Done.","",{c:()=>{s.forEach((e=>this.$H4("Run s{".concat(e,"  help}s for more info."))))}},"Run s{help}s to list all available commands",{c:"sound",d:"ok"},{c:t})}$g4(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];var i=1==t.length?t[0]:t,o=()=>{if(0!=i.length){var e=i.shift();if("string"==typeof e){var t=e;e=()=>{this.$H4(t)}}if("function"==typeof e&&(e={c:e,t:100}),"string"==typeof e.c)switch(e.c){case"ln":e.c=()=>{this.$H4(e.d,e.s)};break;case"chat":Array.isArray(e.d)?e.c=t=>{this.$u4(e.d,t)}:e.c=t=>{this.$u4([[e.f,e.d]],t)};break;case"sound":e.c=()=>{this.$K2.$g6(e.d)};break;case"pass":e.c=t=>{this.$p4(e.d,e.l||"Password",t)};break;case"load":e.c=e=>{this.$v(e)};break;case"on":e.c=()=>{this.$h6.$d5()};break;case"off":e.c=()=>{this.$h6.$F4()};break;case"pause":e.c=e=>{this.$K5(e)};break;default:throw new Error("Unknown command ".concat(e.c))}e.t||(e.t=100),setTimeout((()=>{0==e.c.length?(e.c(),o()):e.c(o)}),Math.max(1,e.t))}};o()}}class R extends M{constructor(e){super(e),this.$E="#001100",this.$p3="#ff0000",this.$u6=this.$p2("DIV",{cssClass:"screen-root"}),this.$p6=new A(e),this.$u6.element.appendChild(this.$p6.$W5()),this.$u6.canvas=this.$p2("CANVAS",{cssClass:"screen-canvas",parent:this.$u6}),this.$p5=this.$u6.canvas.element.getContext("2d"),this.$a6(),window.addEventListener("resize",(()=>this.$u5())),window.addEventListener("load",(()=>this.$u5()))}$u5(){var e=this.$u6.canvas.element;e.width=e.parentElement.clientWidth,e.height=e.parentElement.clientHeight,this.$p6.$u5(),this.$a6()}$R(e){return"rgba(136,255,34,".concat((1-(e=e||0)).toFixed(2),")")}$A4(){return this.$u6.canvas.element.width}$a4(){return this.$u6.canvas.element.height}$a6(){var e=this.$p5;e.clearRect(0,0,this.$A4(),this.$a4()),e.beginPath(),e.rect(0,0,this.$A4(),this.$a4()),e.fillStyle=this.$E,e.fill()}$i3(e){super.$i3(e),this.$u5()}$Y2(e){this.$P5((()=>{this.$P5((()=>{e()}),5)}),-5)}$P5(e,t){var s,i=(t=t||1)>0?0:35,o=this.$A4(),r=this.$a4(),$=this.$p5,n=setInterval((()=>{this.$a6(),i+=t,$.beginPath(),$.strokeStyle=null,i<=20?(s=i/20,$.fillStyle=this.$R(1-s),$.rect(o/2-.02*o,r/2-.01*r,.02*o,.02*r)):i<=25?(s=(i-20)/5,$.fillStyle=this.$R(),$.rect(.5*o*(1-s),r/2-.01*r,o*s,.02*r)):i<28?(s=(i-25)/3,$.fillStyle=this.$R(),$.rect(0,.5*r*(1-s),o,r*s)):(s=(i-28)/7,$.fillStyle=this.$R(s),$.rect(0,0,o,r)),$.fill(),(t>0&&i>=35||t<0&&i<=0)&&(clearInterval(n),this.$p6.$e6(),e())}),30)}}class W{constructor(e){this.$K2=e}$A5(e){this.$P3=e}$S5(){this.$P3=null}$T5(){}}function F(e,t){var s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!s){if(Array.isArray(e)||(s=function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return G(e,t)}(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,$=!0,n=!1;return{s:function(){s=s.call(e)},n:function(){var e=s.next();return $=e.done,e},e:function(e){n=!0,r=e},f:function(){try{$||null==s.return||s.return()}finally{if(n)throw r}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}class N{constructor(e,t,s){this.frame=0,this.x=e,this.y=t}}class H extends W{constructor(e,t){super(e),this.$s6=0,this.$j6=t,this.$a3=[],this.$T5()}$A5(e){super.$A5(e),this.$w6=setInterval((()=>{this.$T5()}),30)}$S5(){super.$S5(),this.$w6&&(clearInterval(this.$w6),this.$w6=null)}$T5(){if(this.$P3){this.$s6++;var e,t,s=this.$P3.$p5,i=this.$P3.$A4(),o=this.$P3.$a4(),r=this.$P3.$p3,$=this.$P3.$R(),n=this.$P3.$R(.7),a=this.$P3.$E;this.$P3.$a6();var h,c,l=Math.round(Math.min(i,o)/12),d=i/2-12*l/2,u=o/2-12*l/2,m=(e,t)=>{e=d+(1+e+.5)*l,t=u+(1+t+.5)*l,this.$a3.push(new N(e,t,0))},p=e=>{e.frame++,e.frame<0||(s.beginPath(),s.fillStyle=null,s.lineWidth=1,s.strokeStyle=this.$P3.$R(e.frame/30),s.arc(e.x,e.y,40*Math.sqrt(.25*e.frame),0,2*Math.PI),s.stroke())},g=(e,t)=>{s.lineWidth=3,s.beginPath(),s.strokeStyle=$,s.rect(d+l+e*l,u+l+t*l,l,l),s.stroke()},f=(e,t,i,o,r,$)=>{s.moveTo(d+(1+e+i)*l,u+(1+t+o)*l),s.lineTo(d+(1+e+r)*l,u+(1+t+$)*l)},_=(e,t,i,o,r)=>{s.font='1em "Courier New", Courier, monospace',s.textAlign="center",s.fillStyle=$,s.fillText(r,d+(1+e+i)*l,u+(1+t+o)*l+8)},y=(e,t)=>{s.lineWidth=3,g(e,t),s.lineWidth=1,s.beginPath(),s.strokeStyle=$,f(e,t,0,0,1,1),f(e,t,0,1,1,0),s.stroke()},v=(e,t,i)=>{s.strokeStyle=i,s.fillStyle=i,s.beginPath(),((e,t,i,o,r,$)=>{s.rect(d+(1+e+i)*l,u+(1+t+o)*l,l*r,l*$)})(e,t,.375,.375,.25,.25),s.fill()},w=(e,t,i)=>{s.strokeStyle=$,s.lineWidth=3,s.beginPath();var o=i.$k4();o.n?(f(e,t,.25,0,.25,.25),f(e,t,.75,0,.75,.25)):f(e,t,.25,.25,.75,.25),o.s?(f(e,t,.25,1,.25,.75),f(e,t,.75,1,.75,.75)):f(e,t,.25,.75,.75,.75),o.w?(f(e,t,0,.25,.25,.25),f(e,t,0,.75,.25,.75)):f(e,t,.25,.25,.25,.75),o.e?(f(e,t,1,.25,.75,.25),f(e,t,1,.75,.75,.75)):f(e,t,.75,.25,.75,.75),s.stroke()};for(h=0;h<10;h++){_(h,-1,.5,.5,"ABCDEFGHIJ".charAt(h))}for(c=0;c<10;c++)_(-1,c,.5,.5,c+1);for(h=0;h<=10;h++)for(c=0;c<=10;c++)s.strokeStyle=n,s.lineWidth=1,s.beginPath(),f(h,c,-.1,0,.1,0),f(h,c,0,-.1,0,.1),s.stroke();for(h=0;h<10;h++)for(c=0;c<10;c++)if(this.$j6.$t5(h,c)&&((t=this.$j6.$J4(h,c)).$h>0&&this.$s6%6==0&&(m(h,c),t.$h--),t.$G3()&&!(t.$N3>0&&(t.$N3--,Math.random()>.5)))){switch(t.$N4()){case"corridor":w(h,c,t);break;case"capsule":y(h,c);break;case"room":g(h,c)}this.$j6.$J4(h,c).$V5>0&&v(h,c,r)}var b,S=F(this.$j6.$r3());try{for(S.s();!(b=S.n()).done;){var k=b.value;k.$G3()&&(e=k.$X2(),k.$z4()?(s.strokeStyle=$,s.lineWidth=8,s.beginPath(),90==k.$V2()?(s.moveTo(d+1.5*l+e.x*l,u+1.25*l+e.y*l),s.lineTo(d+1.5*l+e.x*l,u+1.75*l+e.y*l)):(s.moveTo(d+1.25*l+e.x*l,u+1.5*l+e.y*l),s.lineTo(d+1.75*l+e.x*l,u+1.5*l+e.y*l)),s.stroke()):(s.fillStyle=a,s.beginPath(),s.rect(d+1.3*l+e.x*l,u+1.3*l+e.y*l,.4*l,.4*l),s.fill()))}}catch(e){S.e(e)}finally{S.f()}v((e=this.$j6.$f()).x,e.y,$),this.$a3.forEach((e=>p(e))),this.$a3=this.$a3.filter((e=>e.frame<30))}}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==s)return;var i,o,r=[],$=!0,n=!1;try{for(s=s.call(e);!($=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);$=!0);}catch(e){n=!0,o=e}finally{try{$||null==s.return||s.return()}finally{if(n)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}class B{constructor(e,t){this.x=e,this.y=t,this.vx=.06*Math.random()-.03,this.vy=.06*Math.random()-.03,this.frame=0,this.life=10}$R6(){this.x+=this.vx,this.y+=this.vy,this.frame++}$s3(){return this.frame>this.life}}class U{constructor(e,t,s,i,o){this.scale=o,this.frame=0,this.from={x:e,y:t},this.to={x:s,y:i}}$s3(){return this.frame>6}}class j extends W{constructor(e,t){super(e),this.$r5=t,this.$w6=null,this.$s4=[],this.$h2=[],this.$X=!1,this.$U2=!1,this.$s6=0}$A5(e){super.$A5(e),this.$w6=setInterval((()=>this.$T5()),30)}$S5(){clearInterval(this.$w6),this.$K2.$b6("gun"),this.$K2.$b6("gun2"),super.$S5()}$T5(){if(this.$P3){var e=this.$P3.$p5,t=this.$P3.$A4(),s=this.$P3.$a4(),i=this.$P3.$p3,o=this.$P3.$R(),r=this.$P3.$R(.5),$=(this.$P3.$E,this.$r5.$L5),n=this.$r5.$Z5,a=this.$r5.$z5,h=this.$r5.$J4().$O6;this.$P3.$a6();var c,l,d=Math.round(.7*Math.min(t,s)),u=.05,m=t/2-d/2,p=s/2-d/2,g=1.5*u,f=.925,_=(e,t)=>{if(a){var s=e;e=t,t=s}return[e=n?1-e:e,t=$?1-t:t]},y=(t,s)=>{var i=O(_(t,s),2);t=i[0],s=i[1],e.moveTo(m+d*t,p+d*s)},v=(t,s)=>{var i=O(_(t,s),2);t=i[0],s=i[1],e.lineTo(m+d*t,p+d*s)},w=(e,t,s,i)=>{y(e,t),v(s,i)},b=(t,s,i)=>{var o=O(_(t,s),2);t=o[0],s=o[1],e.arc(m+d*t,p+d*s,d*i,0,2*Math.PI)},S=(t,s,i,o)=>{var r=O(_(t,s),2);if(t=r[0],s=r[1],a){var $=i;i=o,o=$}e.rect(m+d*(t-i/2),p+d*(s-o/2),i*d,o*d)},k=(t,s,i,o,r)=>{e.beginPath(),e.fillStyle=r,e.strokeStyle=null,S(t,s,i,o),e.fill()},I=t=>{e.beginPath(),e.fillStyle=this.$P3.$R(t.frame/t.life),e.strokeStyle=null,S(t.x,t.y,.01,.01),e.fill(),t.$R6()},C=t=>{if(t.frame<=1){e.beginPath(),e.fillStyle=null,e.strokeStyle=r,e.lineWidth=2*t.scale;var s=(t.from.x+t.to.x)/2,i=(t.from.y+t.to.y)/2;0==t.frame?w(t.from.x,t.from.y,s,i):w(s,i,t.to.x,t.to.y),e.stroke()}else{e.beginPath(),e.strokeStyle=null,e.fillStyle=this.$P3.$R((t.frame-2)/4);var o=t.to.x,$=t.to.y;b(o,$,t.scale*u*(t.frame-2)/4),e.fill()}t.frame++},x=(e,t,s,i,o)=>{this.$s4.push(new U(e,t,s,i,o));for(var r=0;r<5*o;r++)this.$h2.push(new B(s,i))};e.beginPath(),e.strokeStyle=o,e.fillStyle=null,e.lineWidth=3,y(0,0),v(1,0),v(1,1),v(.6,1),v(.6,.95),v(.95,.95),v(.95,.05),v(.05,.05),v(.05,.95),v(.4,.95),v(.4,1),v(0,1),v(0,0),e.stroke(),this.$r5.$B3().forEach((e=>k(e.x,e.y,.05,.05,i))),this.$r5.$Q3().forEach((e=>k(e.x,e.y,.05,.05,o)));var T;if(this.$r5.$Q2()){if(this.$X||(this.$K2.$g6("gun"),this.$X=!0),(T=this.$r5.$B3()).length>0){c=T[Math.floor(T.length*Math.random())];var P=.3+.4*Math.random(),D=.95;P>.4&&P<.6&&(D+=u*Math.random()),x(c.x,c.y,P,D,1)}}else if(this.$r5.$t2()){if(this.$X||(this.$K2.$g6("gun"),this.$X=!0),(T=this.$r5.$B3()).length>0){c=T[Math.floor(T.length*Math.random())];var E=(l=this.$r5.$Q3()[Math.floor(2*Math.random())]).x,M=l.y,A=c.x+(6*Math.random()-3)*u,L=c.y+(6*Math.random()-3)*u;x(E,M,A=Math.max(u,Math.min(.95,A)),L=Math.max(u,Math.min(.95,L)),1)}}else this.$K2.$b6("gun"),this.$X=!1;h&&(h.$l3&&Math.random()>.5&&x(g,f,h.$l5.x+.1*Math.random()-.05,h.$l5.y+.1*Math.random()-.05,1.5),(()=>{this.$s6++,e.beginPath(),e.fillStyle=this.$P3.$R(),e.strokeStyle=null,b(.09,.95-.04,.04),S(.07,.95-.04,.04,.08),S(.09,.95-.02,.08,.04),e.fill();var t=Math.atan2(f-h.$l5.y,g-h.$l5.x),s=-Math.sin(t),i=-Math.cos(t);e.beginPath(),e.fillStyle=null,e.strokeStyle=this.$P3.$R(),e.lineWidth=2,w(g,f,g+.13*i,f+.13*s),e.stroke(),e.beginPath(),e.lineWidth=4;var o=h.$l3?.015*Math.sin(1.2*this.$s6):0;w(g+i*(o+.1),f+s*(o+.1),g+i*(o+.14),f+s*(o+.14)),e.stroke(),h.$k5&&(e.beginPath(),e.lineWidth=2,S(h.$l5.x,h.$l5.y,.12,.12),S(h.$l5.x,h.$l5.y,.06,.06),w(h.$l5.x,h.$l5.y-.15,h.$l5.x,h.$l5.y+.15),w(h.$l5.x-.15,h.$l5.y,h.$l5.x+.15,h.$l5.y),e.stroke())})(),!this.$U2&&h.$l3?(this.$U2=!0,this.$K2.$g6("gun2")):this.$U2&&!h.$l3&&(this.$U2=!1,this.$K2.$b6("gun2"))),this.$s4.forEach((e=>C(e))),this.$s4=this.$s4.filter((e=>!e.$s3())),this.$h2.forEach((e=>I(e))),this.$h2=this.$h2.filter((e=>!e.$s3()))}}}class K extends W{constructor(e){super(e),this.$w6=null,this.$s6=0,this.$T=0}$A5(e){super.$A5(e),this.$s6=0,this.$w6=setInterval((()=>this.$T5()),15)}$S5(){clearInterval(this.$w6),super.$S5()}$T5(){if(this.$P3){this.$P3.$a6(),this.$s6++,this.$T*=.98;var e,t,s,i,o,r=this.$P3.$p5,$=this.$P3.$A4(),n=this.$P3.$a4(),a=(this.$P3.$p3,this.$P3.$R()),h=this.$P3.$R(.5),c=(this.$P3.$E,.5*Math.sqrt($*$+n*n));for(e=1;e<=8;e++)r.beginPath(),r.fillStyle=null,r.strokeStyle=h,r.lineWidth=1,r.arc($/2,n/2,c*(e/8),0,2*Math.PI),r.stroke();r.beginPath(),r.fillStyle=a,r.strokeStyle=null,r.arc($/2,n/2,c/25,0,2*Math.PI),r.fill();var l=this.$s6/15;for(e=0;e<20;e++)r.beginPath(),r.fillStyle=null,r.strokeStyle=this.$P3.$R(0==e?0:.3+e/14),r.lineWidth=3,i=l-e/40,t=$/2+c*Math.cos(i),s=n/2+c*Math.sin(i),r.moveTo($/2,n/2),r.lineTo(t,s),r.stroke();for(r.beginPath(),r.fillStyle=null,r.strokeStyle=h,r.lineWidth=1,r.moveTo(0,n/2),r.lineTo($,n/2),r.moveTo($/2,0),r.lineTo($/2,n),r.stroke(),o=this.$s6/1e3-1;o>2*Math.PI;)o-=2*Math.PI;for(;o<0;)o+=2*Math.PI;for(;l>2*Math.PI;)l-=2*Math.PI;for(;l<0;)l+=2*Math.PI;i=c*(this.$s6/2e3),Math.abs(l-o)<.1&&this.$s6<2e3&&(this.$K2.$g6("radar"),this.$T=2),t=i*Math.cos(o),s=i*Math.sin(o),r.beginPath(),r.fillStyle=this.$P3.$R(1-this.$T),r.strokeStyle=null;var d=c/25;r.rect($/2+t-d/2,n/2+s-d/2,d,d),r.fill()}}}class z{constructor(e){this.$h6=e,this.$K2=null,this.$D4=null,this.$d4=null}setSystem(e){this.$D4=e,this.$a=e.$s5().$y(),this.$K2=e.$U()}$G4(e,t){this.$I2(new H(this.$K2,e),t)}$Y3(e,t){this.$I2(new j(this.$K2,e),t)}$K3(e){this.$I2(new K(this.$K2),e)}$I2(e,t){this.$d4?(this.$d4.$S5(),this.$d4=null,this.$h6.$p6.$i5(),this.$h6.$Y2((()=>{this.$d4=e,this.$d4.$A5(this.$h6),this.$d4.$T5(),t&&t()}))):(this.$h6.$p6.$i5(),this.$h6.$P5((()=>{this.$d4=e,this.$d4.$A5(this.$h6),this.$d4.$T5(),t&&t()})))}}class Y{constructor(){this.$d6=!1,this.$j2=null,this.$D5=null,this.$k2=null,this.$Y=null;var e=e=>{var t=window.speechSynthesis.getVoices().filter((e=>"en"==e.lang.substring(0,2))),s=t.filter((t=>t.name==e));return s.length>0?s[0]:t.length>0?t[0]:null};window.speechSynthesis.onvoiceschanged=()=>{window.speechSynthesis.getVoices().filter((e=>"en"==e.lang.substring(0,2)));this.$k2=e("Google UK English Male"),this.$Y=e("Google UK English Female")},this.$a5={};try{this.$a5.ok=new Audio("audio/ok.mp3"),this.$a5.err=new Audio("audio/err.mp3"),this.$a5.chat=new Audio("audio/com.mp3"),this.$a5.beep=new Audio("audio/beep.mp3"),this.$a5.beep2=new Audio("audio/beep.mp3"),this.$a5.radar=new Audio("audio/beep.mp3"),this.$a5.gun=new Audio("audio/gun.mp3"),this.$a5.gun2=new Audio("audio/gun.mp3"),this.$a5.beep.loop=!0,this.$a5.gun.loop=!0,this.$a5.gun2.loop=!0}catch(e){console.log(e)}}$g6(e){if(!this.$d6)try{this.$a5[e].play()}catch(e){console.error("Cannot play sound",e)}}$b6(e){try{this.$a5[e].pause(),this.$a5[e].currentTime=0}catch(e){console.log(e)}}$T6(e){this.$d6=e,this.$b6("beep"),this.$b6("gun")}$o6(e,t,s){var i=e.replace(/[\:\*]/g,"").replace(/m{[^}]*}m/g,"").replace(/<[^\>]*>/g,"").replace(/\&[a-z]*\;/g,"").replace(/[sr]\{/g,"").replace(/\}[sr]/g,"");if(""==i||this.$d6)return this.$l2(i,s);try{var o=t?this.$Y:this.$k2;if(!o)throw Error("No voice found");this.$D5=new SpeechSynthesisUtterance(i),this.$D5.voice=o,this.$D5.rate=t?1.1:1,this.$D5.pitch=t?.9:1.1,this.$D5.onend=()=>{s()},this.$D5.onerror=e=>{console.error(e)},this.$g6("chat"),window.speechSynthesis.speak(this.$D5)}catch(e){return console.error(e),this.$l2(i,s)}}$l2(e,t){this.$g6("chat"),this.$j2=setTimeout((()=>{this.$j2=null,t()}),200+1e3*e.length/20)}$O5(){this.$j2&&clearTimeout(this.$j2),this.$j2=null;try{window.speechSynthesis.cancel()}catch(e){console.error(e)}}}function Q(e,t){var s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!s){if(Array.isArray(e)||(s=function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return X(e,t)}(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,$=!0,n=!1;return{s:function(){s=s.call(e)},n:function(){var e=s.next();return $=e.done,e},e:function(e){n=!0,r=e},f:function(){try{$||null==s.return||s.return()}finally{if(n)throw r}}}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}class Z{constructor(e,t){this.$j6=t,this.$O2=new Y,this.$J2=new z(new R(e)),this.$D3=new q(new L(e)),this.$D3.setSystem(this),this.$J2.setSystem(this),this.$e=[]}$L(e){var t,s=Q(this.$e);try{for(s.s();!(t=s.n()).done;){var i=t.value;if(i.$h4(e))return i.$l6(e),!0}}catch(e){s.e(e)}finally{s.f()}return!1}$U(){return this.$O2}$H2(){return this.$D3}$s5(){return this.$j6}$B(){return this.$J2}$Z(e){e.$S3(this),this.$e.push(e),this.$e.sort(((e,t)=>"help"==e.$k6?-1:"help"==t.$k6||e.$k6>t.$k6?1:e.$k6<t.$k6?-1:0))}$U3(e){return this.$e.filter((t=>t.$k6==e)).length>0}$C(){return this.$e}}class J{constructor(e,t,s,i,o,r){this.$S4=e,this.$Y6=t,this._x=s,this._y=i,this._w=o,this._h=r,this.$u5(),window.addEventListener("resize",(()=>this.$u5())),window.addEventListener("load",(()=>this.$u5()))}$u5(){var e=this.$Y6.width/1920,t=(t,s)=>{this.$S4.style[t]=Math.round(e*s)+"px"};t("width",this._w),t("height",this._h),t("left",this._x),t("top",this._y),this.$S4.style.fontSize=e+"em"}}var ee,te,se,ie=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);ie||alert("This game was created for Gynvael's Winter GameDev Challenge 2018/19 and should be played in latest Chrome! Browser support was limited to reduce file size and fit 125KB limit (see the challenge rules for more info). It may not work properly in your browser!"),(ee=document.createElement("DIV")).id="screen-a",document.body.appendChild(ee),(te=document.createElement("DIV")).id="screen-b",document.body.appendChild(te),(se=document.createElement("IMG")).id="overlay",se.src="../gwgc201819_overlay.png",document.body.appendChild(se);new J(ee,se,64,185,1025,770),new J(te,se,1140,77,721,482);var oe=new class{$f6(e){this.$j6=new D(10,10),this.$D4=new Z(e,this.$j6),this.$m5=new E(this.$D4),this.$j6.$w3(this.$m5),this.$m5.$Q5(this.$j6),this.$P2(),this.$V(),this.$A2(),this.$S2(4,8),this.$d3()}$s5(){return this.$j6}$f4(){return this.$D4}$d3(){this.$f3=new h,this.$D2=new a,this.$g3=new r,this.$F2=new o,this.$h3=new s,this.$j3=new i,this.$A3=new c,this.$G2=new l;var e=(e,t,s)=>{this.$j6.$J4(e,t).$_4(s)};e(3,3,new f(this.$f3)),e(4,0,new f(this.$D2)),e(2,3,new u("SIG-18 communication module (host: ".concat(this.$j6.$x4().$R4,")"))),e(7,2,new g("Rescue Capsule Auth Code: U317AB")),e(7,2,new m("blue")),e(8,3,new f(this.$G2)),e(1,3,new f(this.$g3)),e(7,4,new f(this.$A3)),e(0,5,new f(this.$F2)),e(1,6,new m("red")),e(2,6,new f(this.$h3)),e(5,6,new m("yellow")),e(4,7,new f(this.$j3))}$V(){var e=(e,t,s)=>{this.$j6.$J4(e,t).$V5=s};e(7,3,6),e(6,6,4),e(5,6,2),e(1,6,4),e(2,8,5),e(3,1,4),e(2,2,4),this.$j6.$J4(6,3).$V4(87,7,3),this.$j6.$J4(6,3).$O6=new p}$P2(){var e=(e,t,s,i)=>{var o=this.$j6.$J4(e,t);o.$Q4(s),i&&o.$B4(i)};e(4,8,"We are at our spaceship - s{Sierra 23}s. It was totally wrecked during approaching the station. What's worse, the dock station was damaged too. We have stuck here."),e(3,8,"We are at s{docks}s. There is a rescue capsule behind the southern door. We could use it to escape from here."),e(3,9,"We are at s{dock station DS002}s. It is a rescue capsule! We could use it to escape from here, but we need your help to launch it. Special software may be required."),e(2,8,"s{Empty dock station}s. There was probably a rescue capsule before but it has departed a long time ago."),e(3,7,"A long s{corridor}s that joins docks with the rest of the station.","corridor"),e(3,6,"A s{corridor}s. There is a plate on the eastern door labelled Warehouse","corridor"),e(3,5,"A s{corridor}s. There is a canteen behind the eastern door. The western corridor leads to quarters of the crew. We see a lobby at the north.","corridor"),e(3,4,"It is a s{corridor}s that leads to the main Lobby. It seems to be totally empty.","corridor"),e(3,3,"The main s{lobby}s is absolutely empty. There are bullet holes in the front of the reception desk. The logo in the back is damaged. A mix of documents and waste is on the floor. Seems like a regular battle took place here."),e(4,6,"The s{warehouse}s seems to have several rooms. This one contains mostly food supplies and cleaning stuff. More interesting items are probably behind southern doors."),e(4,7,"This room of the s{warehouse}s is full of spare parts, electronic modules and some repair tools. There is a huge mess here. Shelves are on the floor and nothing seems to be in the right place. There are some doors at the end of the room."),e(5,7,"We are in the s{armoury}s. Somebody has broken in here and stole all weapons. Shelves are empty. A few cartridges lie on the floor."),e(5,6,"They have a decent s{kitchen}s here. Of course, there is nobody here.  There is a doorplate with Warehouse label on western doors."),e(4,5,"We are at s{the canteen}s. Plates are left on tables like someone did not manage to take them. A few chairs lie overturned on the floor."),e(5,5,"We are inside of s{the canteen}s. There is nobody here and the mess shows that everybody left it in hurry."),e(6,7,"It is a back s{corridor}s that leads to the main warehouse.","corridor"),e(6,6,"We are in a long, empty s{corridor}s. There are bloodstains on the walls.","corridor"),e(6,5,"That is a back s{corridor}s, there are some pieces of furniture laying on the floor what makes crossing difficult. A few bullet holes in the wall are signs of a battle that took place here.","corridor"),e(6,4,"We are in a long s{corridor}s that leads to the laboratory section.","corridor"),e(6,3,"The room was a s{security checkpoint}s. It has signs of a heavy fight - bullet holes, blood stains, the furniture are broken into pieces. The room is equipped with a sentry gun BER-84 but it seems to be off-line."),e(4,3,"It's a s{corridor}s that leads to the lobby. We see parts of droid's body lying down on the floor and signs of explosions.","corridor"),e(5,3,"The s{corridor}s joins the laboratory section with the lobby. There are several bullet shells on the floor.","corridor"),e(7,3,"We are inside the s{laboratory}s. It seems that researches on improving SIG-18 droids took place over here. They have schemas of that model on the walls and lots of spare parts. There is no production machines, just computers. I bet they were working on improving software of its artificial intelligence."),e(8,3,"We are in the laboratory's s{meeting room}s. There is a huge table in the middle with some software architecture diagrams. It seems that engineers have left it in a hurry."),e(7,2,"It's a dedicated s{warehouse}s for the lab. They keep spare parts of SIG-18 and some backup computers here."),e(7,4,"We have entered the s{server room}s of the lab. Lots of servers are here. Everything is up and running. They are separate to core systems of the space station so they must run services dedicated for researches of the lab."),e(2,5,"It is a s{corridor}s to quarters of the crew.","corridor"),e(1,5,"We are walking down a s{corridor}s. There is a door plate on the west with label: Commander's Quarter.","corridor"),e(2,6,"That's a s{room of crew members}s. It has 10 beds. There are many signs of a fight: the blood on walls and bullet holes everywhere. The cabinets are smashed on the floor."),e(1,6,"It is a s{room of crew members}s. It has 16 beds. The room is very clean comparing to other locations. Seems like it wasn't used recently."),e(0,5,"We are inside the s{commander's quarter}s. It is demolished but there are no signs of a fight. It seems that someone was searching for something here."),e(2,3,"A s{corridor}s is leading to office and administration section of the space station. There is a destroyed battle droid (model SIG-18) on the floor.","corridor"),e(1,3,"We are in the s{office}s part of the station. We see a heap of papers and electronics in the centre of the room. It's partially burned. Seems like someone was trying to destroy all records. There are bullet holes in the walls."),e(2,2,"This is an s{office}s after a huge battle: blood, bullet holes, shells and cartridges on the floor, burned equipment. In the corner, we see a destroyed battle droid SIG-18."),e(3,2,"It's the north s{corridor}s. Some documents from the lobby are spread all over the floor.","corridor"),e(3,1,"We are in a s{corridor}s. In the end, there is an entrance to the internal services area.","corridor"),e(3,0,"There is the central s{oxygen generator}s in the room. It recycles oxygen from  CO2. Someone was trying to break in here but unsuccessfully. The door is slightly damaged."),e(2,0,"We are in the s{power generator room}s. It supplies the whole station. It is very noisy here. Two of three power generators seems to be up and running. One is down."),e(4,0,"It is the s{computing core}s of the station. Servers here host core services of the station. Everything seems to be up and running."),this.$j6.$J4(3,9).$B4("capsule")}$A2(){var e=(e,t,s,i,o,r,$)=>{var n=this.$j6.$M4(e,t,s,i);return o&&n.$F5(),r&&(n.$_5=r),$&&n.$b3($),n};e(3,8,3,9,!0,"capsule"),e(4,8,3,8),e(2,8,3,8,!0),e(3,8,3,7),e(3,7,3,6),e(3,6,3,5,!0).$x5(),e(3,5,3,4),e(3,4,3,3),e(3,6,4,6,!0,"blue","blue"),e(4,6,4,7,!0,"blue","blue"),e(4,7,5,7,!0,"blue","blue"),e(4,6,5,6,!0,"blue","blue"),e(3,5,4,5),e(4,5,5,5),e(5,5,5,6,!0),e(5,7,6,7,!0,"blue","blue"),e(6,7,6,6),e(6,6,6,5),e(6,5,6,4),e(6,4,6,3,!0),e(5,3,6,3,!0),e(4,3,5,3),e(3,3,4,3,!0),e(6,3,7,3,!0,"yellow","yellow"),e(7,3,7,2,!0),e(7,3,8,3,!0),e(7,3,7,4,!0,"lab-server").$m6("wirving","First name of an engineer who has red hair",/duncan/i),e(2,5,3,5),e(1,5,2,5),e(3,6,2,6),e(2,5,2,6,!0),e(1,5,1,6,!0),e(1,5,0,5,!0,"commander").$m6("swoodley","What year have you joined Sigma-18 crew?",/2070/),e(3,3,2,3,!0),e(2,3,1,3,!0),e(2,3,2,2,!0),e(3,3,3,2),e(3,2,3,1),e(3,1,3,0,!0,"red","red"),e(3,0,4,0,!0,"core-comp").$m6("ngallegos","What version of SIG-18 artificial intelligence module was most successful?",/19[^0-9]38[^0-9]2/i),e(3,0,2,0,!0),e(6,6,5,6,!0),e(1,6,1,7,!0,"black","black")}$S2(e,t){this.$j6.$z(e,t),this.$j6.$J4(e,t).$M5()}};oe.$f6(document);oe.$s5();var re=oe.$f4(),$e=oe.$f4().$B();oe.$f4().$H2().$h6.$i3(document.querySelector("#screen-a")),$e.$h6.$i3(document.querySelector("#screen-b")),re.$Z(new class extends t{constructor(){super(),this.$k6="help",this.$z6="List all available commands"}$l6(e){this.$D3.$H4("Available commands:");for(var t=this.$D4.$C(),s=0;s<t.length;s++){var i=t[s],o=i.$z6,r=i.$k6;o&&r&&this.$D3.$H4(" * s{".concat(r,"}s - ").concat(o))}this.$D3.$H4("Run s{[command] help}s for more info. For example: s{com help}s"),this.$D3.$H4(""),this.$D3.$H4("-------------------"),this.$D3.$H4("If you really got stuck and you have no idea what to do, ask marines for a hint. Type s{com hint}s and press ENTER"),this.$D4.$U().$g6("ok")}}),re.$Z(new class extends t{constructor(){super(),this.$K2=null,this.$k6="sfx",this.$z6="Turn off/on terminal sound"}$S3(e){super.$S3(e),this.$K2=e.$U()}execHelp(){this.$D3.$g4("Available commands are:","","s{sfx on}s","Turn the sound on","","s{sfx off}s","Turn the sound off",{c:"sound",d:"ok",t:0})}execOn(){this.$K2.$T6(!1),this.$D3.$H4("Sound enabled"),this.$K2.$g6("ok")}execOff(){this.$K2.$T6(!0),this.$D3.$H4("Sound disabled"),this.$K2.$g6("ok")}}),re.$Z(new class extends t{constructor(){super(),this._squad=null,this._directionMap={n:"north",s:"south",e:"east",w:"west"},this.$k6="com",this.$z6="Communication with squad of marines in the field"}$S3(e){super.$S3(e),this._squad=this.$j6.$j4()}execStatus(){this.$z2(),this._squad.$o2((()=>{this.$L2()})),this._squad=this.$j6.$j4()}execGo(e){var t=e.length>=3?e[2]:"";return t?(t=t.toLowerCase(),this._directionMap[t]?(this.$z2(),void this._squad.$u3(t,(e=>{var t=(e=e||[]).filter((e=>"disk"==e.$c6));t.length>0?this.$D3.$J(t,(()=>{this.$L2()})):this.$L2()}))):(this.$D4.$U().$g6("err"),void this.$D3.$H4("Error: unknown direction ".concat(t)))):(this.$D4.$U().$g6("err"),void this.$D3.$H4("Error: Direction argument is required. Run s{com help}s for more info."))}execHint(){var e=this.$j6.$u2().$e5();this.$D3.$g4({c:"off"},{c:"chat",d:[["hacker","Commander, any ideas what to do next?"],["commander","Really? I thought that you are the hacker here! "+e]]},{c:"on"})}execHelp(){this.$D3.$g4("Use this command to communicate with squad of marines in the field","Available commands are:","","s{com hint}s","r{NOTICE! Real hacker does not need that! FOR NOOBS ONLY!}r","Ask marines for a hint. Use it whenever you got stuck and you do not know what to do.","","s{com status}s","Ask marines to send status report from the field.","","s{com go [direction]}s","Ask marines to explore next location in defined direction.","Possible directions are:","* s{n}s - North (shortcut s{SHIFT + UP_ARROW}s)","* s{e}s - East (shortcut s{SHIFT + RIGHT_ARROW}s)","* s{s}s - South (shortcut s{SHIFT + DOWN_ARROW}s)","* s{w}s - West (shortcut s{SHIFT + LEFT_ARROW}s)","For example: s{com go w}s","","s{Hint}s: Use key shortcuts (SHIFT + ARROW_KEY) to navigate quicker.",{c:"sound",d:"ok",t:0})}}),new e(re).$g6(ie),window.onbeforeunload=function(){return"Are you sure you want to leave?"}})();